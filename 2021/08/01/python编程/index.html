<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>python编程 - 小凯のHome</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="小凯のHome"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="小凯のHome"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="这是对文章的摘要内容"><meta property="og:type" content="blog"><meta property="og:title" content="python编程"><meta property="og:url" content="https://violet-zky.github.io/"><meta property="og:site_name" content="小凯のHome"><meta property="og:description" content="这是对文章的摘要内容"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="c:/Users/zky666/AppData/Roaming/Typora/typora-user-images/image-20210724104847224.png"><meta property="article:published_time" content="2021-08-01T02:16:17.000Z"><meta property="article:modified_time" content="2022-01-27T09:01:03.353Z"><meta property="article:author" content="xkxk"><meta property="article:tag" content="教程"><meta property="article:tag" content="python"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="C:\Users\zky666\AppData\Roaming\Typora\typora-user-images\image-20210724104847224.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://violet-zky.github.io/2021/08/01/python%E7%BC%96%E7%A8%8B/"},"headline":"小凯のHome","image":["https://violet-zky.github.io/2021/08/01/python%E7%BC%96%E7%A8%8B/%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2.jpg","https://violet-zky.github.io/2021/08/01/python%E7%BC%96%E7%A8%8B/%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A22.jpg"],"datePublished":"2021-08-01T02:16:17.000Z","dateModified":"2022-01-27T09:01:03.353Z","author":{"@type":"Person","name":"xkxk"},"description":"这是对文章的摘要内容"}</script><link rel="canonical" href="https://violet-zky.github.io/2021/08/01/python%E7%BC%96%E7%A8%8B/"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">小凯のHome</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/messages">留言</a><a class="navbar-item" href="/music">影音</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Join Gitter" href="https://gitter.im/hexo-theme-amazing/community"><i class="fab fa-gitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-08-01  <a class="commentCountImg" href="/2021/08/01/python%E7%BC%96%E7%A8%8B/#comment-container"><span class="display-none-class">1a1f16673d50d417c34590b1226545f4</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="1a1f16673d50d417c34590b1226545f4">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>2 小时  <i class="fas fa-pencil-alt"> </i>21.7 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">python编程</h1><div class="content"><h1 id="变量和简单类型"><a href="#变量和简单类型" class="headerlink" title="变量和简单类型"></a>变量和简单类型</h1><h2 id="单行注释和多行注释"><a href="#单行注释和多行注释" class="headerlink" title="单行注释和多行注释"></a>单行注释和多行注释</h2><ul>
<li>通常而言，合理的代码注释应该占源代码的1/3左右</li>
</ul>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>弱类型语言两个典型特征</p>
<ol>
<li>变量无需声明即可直接赋值：对于一个不存在的变量赋值就相当于定义了一个新变量</li>
<li>变量的数据类型可以动态的改变：同一个变量可以一会被赋值整数值，一会为字符串</li>
</ol>
<span id="more"></span>

<!--more-->

<h3 id="使用print函数输出变量"><a href="#使用print函数输出变量" class="headerlink" title="使用print函数输出变量"></a>使用print函数输出变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(value, ..., sep=<span class="string">&#x27; &#x27;</span>, end=<span class="string">&#x27;\n&#x27;</span>, file=sys.stdout, flush=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>value</p>
<ul>
<li>可以输出多个变量</li>
</ul>
</li>
<li><p>sep=’|’</p>
</li>
<li><p>end=’ ‘</p>
</li>
<li><p>file</p>
<ul>
<li>```python<br>f = open(“hello.txt”, “w”)<br>print(“hello,world!”, file=f)<br>f.close()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ flush参数用于控制输出缓存，一般保持为False，以获得较好的性能</span><br><span class="line"></span><br><span class="line">### 变量的命名规则</span><br><span class="line"></span><br><span class="line">+ 标识符可以由字母、数字、下划线(_)组成，其中数字不能打头</span><br><span class="line">+ 标识符不能为python关键字，但可以包含关键字</span><br><span class="line">+ 标识符不能包含空格</span><br><span class="line"></span><br><span class="line">### python 的关键字和内置函数</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">import keyword</span><br><span class="line">keyword.kwlist</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dir</span>(__builtins__)</span><br></pre></td></tr></table></figure>

<h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p>整型数值的四种表示形式</p>
<ol>
<li>十进制</li>
<li>二进制：0b或0B开头</li>
<li>八进制：0o或0O开头</li>
<li>十六进制：0x或0X开头</li>
</ol>
<p>为了提高数值（包括浮点型）的可读性，python3允许使用_对数值进行分隔</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">one_million = <span class="number">1_000_000</span></span><br><span class="line"><span class="built_in">print</span>(one_million)</span><br><span class="line">price = <span class="number">234_234_234</span>  <span class="comment"># price实际的值为234234234</span></span><br></pre></td></tr></table></figure>

<h3 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h3><p>表示形式：</p>
<ol>
<li>十进制形式</li>
<li>科学计数形式 5.12e2 5.12E2 –&gt; 5.12x10<sup>2</sup></li>
</ol>
<p>注：只有浮点型数值才可以用科学计数形式表示。51200为整型，512E2为浮点型</p>
<h3 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h3><p>复数的虚部用j或J表示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cmath</span><br></pre></td></tr></table></figure>

<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串和转义字符"><a href="#字符串和转义字符" class="headerlink" title="字符串和转义字符"></a>字符串和转义字符</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;&quot;hello,my girlfriend.Let&#x27;</span>s have dinne<span class="string">r&quot;, he said.&#x27;    # ×</span></span><br><span class="line"><span class="string">str = &#x27;&quot;</span>hello,my girlfriend.Let\<span class="string">&#x27;s have dinner&quot;, he said.&#x27;</span>   <span class="comment"># √</span></span><br><span class="line"><span class="comment"># 观察颜色</span></span><br></pre></td></tr></table></figure>

<h3 id="拼接字符串"><a href="#拼接字符串" class="headerlink" title="拼接字符串"></a>拼接字符串</h3><ul>
<li>两个字符串写在一起，自动拼接</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;hello,&quot;</span> <span class="string">&quot;girlfriend&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>+号拼接</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;hello,&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;girlfriend&quot;</span></span><br><span class="line">str3 = str1 + str2</span><br><span class="line"><span class="built_in">print</span>(str3)</span><br></pre></td></tr></table></figure>

<h3 id="repr和字符串"><a href="#repr和字符串" class="headerlink" title="repr和字符串"></a>repr和字符串</h3><p>当需要将字符串与数值进行拼接时，可以使用str()和repr()函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;这本书的价格是：&quot;</span></span><br><span class="line">price = <span class="number">118</span></span><br><span class="line"><span class="built_in">print</span>(s + p)    <span class="comment"># 报错</span></span><br><span class="line"><span class="built_in">print</span>(s + <span class="built_in">str</span>(p))</span><br><span class="line"><span class="built_in">print</span>(s + <span class="built_in">repr</span>(p))</span><br></pre></td></tr></table></figure>

<p>其中str是python内置的函数，repr则是函数，此外repr还可以以python表达式的形式来表示值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;hello, my girlfriend&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>(<span class="built_in">str</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hello, my girlfriend</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello, my girlfriend&#x27;</span></span><br></pre></td></tr></table></figure>

<p>带引号的字符串——字符串的python的表达式形式</p>
<p>交互式解释器中，python会自动使用repr</p>
<h3 id="使用input和raw-input获得用户输入"><a href="#使用input和raw-input获得用户输入" class="headerlink" title="使用input和raw_input获得用户输入"></a>使用input和raw_input获得用户输入</h3><p>input函数总是返回一个字符串</p>
<h3 id="长字符串"><a href="#长字符串" class="headerlink" title="长字符串"></a>长字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">hello,mygirlfriend</span></span><br><span class="line"><span class="string">let&#x27;s have dinner</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;  \</span></span><br><span class="line"><span class="string">hello,mygirlfriend \</span></span><br><span class="line"><span class="string">let&#x27;s have dinner&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">20</span> + <span class="number">3</span> / <span class="number">4</span> + \</span><br><span class="line">       <span class="number">2</span> * <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="原始字符串"><a href="#原始字符串" class="headerlink" title="原始字符串"></a>原始字符串</h3><p>原始字符串以r开头，且不会把\当成特殊字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;&quot;let\&#x27;s go&quot;, she said&#x27;</span>)</span><br><span class="line"><span class="string">&quot;let&#x27;s go&quot;</span>, she said</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">r&#x27;&quot;let\&#x27;s go&quot;, she said&#x27;</span>)</span><br><span class="line"><span class="string">&quot;let\&#x27;s go&quot;</span>, she said</span><br></pre></td></tr></table></figure>

<p>原始字符串的结尾不能为\</p>
<p>需要的话可以使用字符串拼接方法</p>
<h3 id="字节串（bytes）"><a href="#字节串（bytes）" class="headerlink" title="字节串（bytes）"></a>字节串（bytes）</h3><p>字符串转换成bytes对象</p>
<ol>
<li>字符串内容都为ASCII字符，可直接在字符串之前加ｂ</li>
<li>调用bytes()函数，如果不指定字符集，默认为utf-8</li>
<li>调用字符串本身的encode()方法</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b1 = <span class="built_in">bytes</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b1</span><br><span class="line"><span class="string">b&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b2 = <span class="string">b&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b2</span><br><span class="line"><span class="string">b&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b3 = <span class="string">b&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b3</span><br><span class="line"><span class="string">b&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b3[<span class="number">0</span>]</span><br><span class="line"><span class="number">104</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b3[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line"><span class="string">b&#x27;ll</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b4 = b&#x27;</span>你好世界<span class="string">&#x27;</span></span><br><span class="line"><span class="string">SyntaxError: bytes can only contain ASCII literal characters.</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b5 = bytes(&quot;helloworld&quot;, encoding = &#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b5</span></span><br><span class="line"><span class="string">b&#x27;</span>helloworld<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; print(b5)</span></span><br><span class="line"><span class="string">b&#x27;</span>helloworld<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b6 = bytes(&quot;你好世界&quot;, encoding = &#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b6</span></span><br><span class="line"><span class="string">b&#x27;</span>\xe4\xbd\xa0\xe5\xa5\xbd\xe4\xb8\x96\xe7\x95\x8c<span class="string">&#x27; </span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b7 = &quot;你好世界&quot;.encode(&#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; b7</span></span><br><span class="line"><span class="string">b&#x27;</span>\xe4\xbd\xa0\xe5\xa5\xbd\xe4\xb8\x96\xe7\x95\x8c<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; st = b7.decode(&#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; st</span></span><br><span class="line"><span class="string">&#x27;</span>你好世界<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="深入理解字符串"><a href="#深入理解字符串" class="headerlink" title="深入理解字符串"></a>深入理解字符串</h2><h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><table>
<thead>
<tr>
<th>转义字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\b</td>
<td>退格符</td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
</tr>
<tr>
<td>\r</td>
<td>回车符</td>
</tr>
<tr>
<td>\t</td>
<td>制表符</td>
</tr>
<tr>
<td>\“</td>
<td>双引号</td>
</tr>
<tr>
<td>\‘</td>
<td>单引号</td>
</tr>
<tr>
<td>\\</td>
<td>反斜线</td>
</tr>
</tbody></table>
<h3 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h3><p>python提供了“%”对各种类型的数据进行格式化输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">price = <span class="number">118</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;this book costs %s yuan&quot;</span> % price)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line">price = <span class="number">118</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s &#x27;s book cost %s yuan&quot;</span> % (name, price))</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>转换说明符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>d, i</td>
<td>带符号十进制整数</td>
</tr>
<tr>
<td>o</td>
<td>带符号八进制整数</td>
</tr>
<tr>
<td>x</td>
<td>带符号十六进制整数</td>
</tr>
<tr>
<td>X</td>
<td>带符号十六进制整数</td>
</tr>
<tr>
<td>e</td>
<td>科学计数法的浮点数e</td>
</tr>
<tr>
<td>E</td>
<td>科学计数法的浮点数E</td>
</tr>
<tr>
<td>f, F</td>
<td>十进制的浮点数</td>
</tr>
<tr>
<td>g</td>
<td>智能选择f或e</td>
</tr>
<tr>
<td>G</td>
<td>智能选择F或E</td>
</tr>
<tr>
<td>C</td>
<td>转换为单字符</td>
</tr>
<tr>
<td>r</td>
<td>repr()转换为字符串</td>
</tr>
<tr>
<td>s</td>
<td>str()转换为字符串</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">118</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6i&quot;</span> % num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6d&quot;</span> % num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6o&quot;</span> % num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6x&quot;</span> % num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6X&quot;</span> % num)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num is %6s&quot;</span> % num)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>    <span class="number">118</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>    <span class="number">118</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>    <span class="number">166</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>     <span class="number">76</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>     <span class="number">76</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num <span class="keyword">is</span>    <span class="number">118</span></span><br></pre></td></tr></table></figure>

<p>此时指定了字符串的最小宽度为6，默认情况下，转换出来的字符串总是右对齐的，在python中是可以改变的</p>
<ul>
<li>-：指定左对齐</li>
<li>+：表示数值总要带着符号（正数带+，负数带-）</li>
<li>0：表示不补充空格，补充0</li>
</ul>
<p>注：这三个标志可以同时存在</p>
<p>对于浮点数，python允许指定小数点后的数字位数</p>
<p>对于字符串，python允许指定转换后的字符串的最大字符数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;kuangtu is %10.5s &quot;</span> % name)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kuangtu <span class="keyword">is</span>      zhang </span><br></pre></td></tr></table></figure>

<h3 id="序列相关方法"><a href="#序列相关方法" class="headerlink" title="序列相关方法"></a>序列相关方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s[<span class="number">3</span>:-<span class="number">5</span>]</span><br><span class="line">s[<span class="number">5</span>:]</span><br><span class="line">s[-<span class="number">6</span>:]</span><br><span class="line">s[:<span class="number">5</span>]</span><br><span class="line">s[:-<span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span> <span class="keyword">in</span> s)</span><br><span class="line"><span class="built_in">len</span>()</span><br><span class="line"><span class="built_in">max</span>()</span><br><span class="line"><span class="built_in">min</span>()</span><br></pre></td></tr></table></figure>

<h3 id="大小写相关方法"><a href="#大小写相关方法" class="headerlink" title="大小写相关方法"></a>大小写相关方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(<span class="built_in">str</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(<span class="built_in">str</span>.title)</span><br></pre></td></tr></table></figure>

<ul>
<li>s.title() 首字母大写</li>
<li>s.upper() 每个字母大写</li>
<li>s.lower() 每个字母小写</li>
</ul>
<h3 id="删除空白"><a href="#删除空白" class="headerlink" title="删除空白"></a>删除空白</h3><p>strip</p>
<p>v 脱衣服; 除去，剥去; 拆卸; 剥夺;</p>
<p>strip() 方法用于移除字符串头尾指定的字符（默认为空格）。</p>
<ul>
<li>strip()：删除字符串前后的空白</li>
<li>lstrip()：删除字符串前面（左边）的空白</li>
<li>rstrip()：删除字符串后面（右边）的空白</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">help</span>(<span class="built_in">str</span>.strip)</span><br><span class="line">Help on method_descriptor:</span><br><span class="line"></span><br><span class="line">strip(self, chars=<span class="literal">None</span>, /)</span><br><span class="line">    Return a copy of the string <span class="keyword">with</span> leading <span class="keyword">and</span> trailing whitespace removed.</span><br><span class="line">    </span><br><span class="line">    If chars <span class="keyword">is</span> given <span class="keyword">and</span> <span class="keyword">not</span> <span class="literal">None</span>, remove characters <span class="keyword">in</span> chars instead.</span><br></pre></td></tr></table></figure>

<p>python中str不可变，故返回副本而不是原字符串的改变</p>
<p><strong>注意：</strong>该方法只能删除开头或是结尾的字符，不能删除中间部分的字符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;*****this is **string** example....wow!!!*****&quot;</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>.strip( <span class="string">&#x27;*&#x27;</span> ))  <span class="comment"># 指定字符串 *</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>this <span class="keyword">is</span> **string** example....wow!!!</span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;123abcrunoob321&quot;</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>.strip( <span class="string">&#x27;12&#x27;</span> ))  <span class="comment"># 字符序列为 12</span></span><br></pre></td></tr></table></figure>

<h3 id="查找、替换相关方法"><a href="#查找、替换相关方法" class="headerlink" title="查找、替换相关方法"></a>查找、替换相关方法</h3><ul>
<li>startwith()：判断字符串是否以指定子串开头</li>
<li>endswith()：判断字符串是否以指定子串结尾</li>
<li>find()：查找指定子串在字符串中出现的位置，若没找到，返回-1</li>
<li>index()：查找指定子串在字符串中出现的位置，若没找到，引发ValueError错误</li>
<li>replace()：使用指定子串替换字符串中的目标子串</li>
<li>translate()：使用指定的翻译映射表对字符串替换</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(s.replace(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">intab= <span class="string">&quot;aeiou&quot;</span></span><br><span class="line">outtab= <span class="string">&quot;12345&quot;</span></span><br><span class="line">deltab= <span class="string">&quot;thw&quot;</span></span><br><span class="line">  </span><br><span class="line">trantab1= <span class="built_in">str</span>.maketrans(intab,outtab)<span class="comment"># 创建字符映射转换表</span></span><br><span class="line">trantab2= <span class="built_in">str</span>.maketrans(intab,outtab,deltab)<span class="comment">#创建字符映射转换表，并删除指定字符</span></span><br><span class="line">  </span><br><span class="line">test= <span class="string">&quot;this is string example....wow!!!&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(test.translate(trantab1))</span><br><span class="line"><span class="built_in">print</span>(test.translate(trantab2))</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>th3s3s str3ng2x1mpl2....w4w!!!</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>3s 3s sr3ng2x1mpl2...<span class="number">.4</span>!!!</span><br></pre></td></tr></table></figure>

<h3 id="分割、连接方法"><a href="#分割、连接方法" class="headerlink" title="分割、连接方法"></a>分割、连接方法</h3><ul>
<li>split()：将字符串按指定分隔符分割成多个短语</li>
<li>join()：将多个短语连接成字符串</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;Line1-abcdef \nLine2-abc \nLine4-abcd&quot;</span>;</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">str</span>.split( );       <span class="comment"># 以空格为分隔符，包含 \n</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">str</span>.split(<span class="string">&#x27; &#x27;</span>, <span class="number">1</span> ); <span class="comment"># 以空格为分隔符，分隔成两个</span></span><br><span class="line">[<span class="string">&#x27;Line1-abcdef&#x27;</span>, <span class="string">&#x27;Line2-abc&#x27;</span>, <span class="string">&#x27;Line4-abcd&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;Line1-abcdef&#x27;</span>, <span class="string">&#x27;\nLine2-abc \nLine4-abcd&#x27;</span>]</span><br><span class="line"></span><br><span class="line">message = <span class="string">&#x27;https://mp.csdn.net/&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(message.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;/&quot;</span>)[<span class="number">0</span>].split(<span class="string">&quot;.&quot;</span>))</span><br><span class="line">打印结果：[<span class="string">&#x27;mp&#x27;</span>, <span class="string">&#x27;csdn&#x27;</span>, <span class="string">&#x27;net&#x27;</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;-&quot;</span></span><br><span class="line">s2 = <span class="string">&quot;&quot;</span></span><br><span class="line">seq = (<span class="string">&quot;r&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;b&quot;</span>) <span class="comment"># 字符串序列</span></span><br><span class="line"><span class="built_in">print</span> (s1.join( seq ))</span><br><span class="line"><span class="built_in">print</span> (s2.join( seq ))</span><br><span class="line">r-u-n-o-o-b</span><br><span class="line">runoob</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;li = [<span class="string">&#x27;my&#x27;</span>,<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;is&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>] </span><br><span class="line">&gt;&gt;&gt;<span class="string">&#x27; &#x27;</span>.join(li) </span><br><span class="line"><span class="string">&#x27;my name is bob&#x27;</span> </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt;<span class="string">&#x27;_&#x27;</span>.join(li) </span><br><span class="line"><span class="string">&#x27;my_name_is_bob&#x27;</span> </span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><ul>
<li>&amp;：按位与</li>
<li>|：按位或</li>
<li>^：按位异或</li>
<li>~：按位取反</li>
<li>&lt;&lt;：左位移运算符</li>
<li>‘&gt;&gt;：右位移运算符</li>
</ul>
<h3 id="扩展后的赋值运算符"><a href="#扩展后的赋值运算符" class="headerlink" title="扩展后的赋值运算符"></a>扩展后的赋值运算符</h3><h3 id="索引运算符"><a href="#索引运算符" class="headerlink" title="索引运算符"></a>索引运算符</h3><p>[]</p>
<p>[2:8:3]</p>
<h3 id="比较运算符与bool类型"><a href="#比较运算符与bool类型" class="headerlink" title="比较运算符与bool类型"></a>比较运算符与bool类型</h3><ul>
<li>is：判断两个变量使用的对象是否相同</li>
<li>is not：判断两个变量使用的对象是否不相同，不相同返回Tru</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">a = time.gtime()</span><br><span class="line">b = time.gtime()</span><br><span class="line"><span class="built_in">print</span>(a == b)     <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)     <span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<p>每次调用gtime()函数都返回不同的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span>(a)</span><br><span class="line"><span class="built_in">id</span>(b)</span><br><span class="line"><span class="comment"># 判断变量所引用对象的内存地址，计算机同一块内存在任一时刻只能存放一个对象</span></span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><h3 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True_statements <span class="keyword">if</span>  expression <span class="keyword">else</span> False_statements</span><br></pre></td></tr></table></figure>

<p>python允许在三目运算符的True_statements或False_statements中放置多条语句</p>
<ul>
<li>多条语句以英文逗号隔开：每条都会执行，返回所有返回值构成的元组</li>
<li>多条语句以英文逗号隔开：每条都会执行，返回第一条语句的返回值</li>
</ul>
<h3 id="in运算符"><a href="#in运算符" class="headerlink" title="in运算符"></a>in运算符</h3><ul>
<li>in</li>
<li>not in</li>
</ul>
<p>in运算符可以判断字符串是否包含特定的子串，和序列是否包含子序列</p>
<h3 id="运算符的结合性和优先级"><a href="#运算符的结合性和优先级" class="headerlink" title="运算符的结合性和优先级"></a>运算符的结合性和优先级</h3><h1 id="列表、元组和字典"><a href="#列表、元组和字典" class="headerlink" title="列表、元组和字典"></a>列表、元组和字典</h1><h2 id="序列简介"><a href="#序列简介" class="headerlink" title="序列简介"></a>序列简介</h2><h3 id="python的序列"><a href="#python的序列" class="headerlink" title="python的序列"></a>python的序列</h3><p>……</p>
<h3 id="创建列表和元组"><a href="#创建列表和元组" class="headerlink" title="创建列表和元组"></a>创建列表和元组</h3><p>……</p>
<h2 id="列表和元组的通用用法"><a href="#列表和元组的通用用法" class="headerlink" title="列表和元组的通用用法"></a>列表和元组的通用用法</h2><h3 id="通过索引使用元素"><a href="#通过索引使用元素" class="headerlink" title="通过索引使用元素"></a>通过索引使用元素</h3><p>……</p>
<h3 id="子序列"><a href="#子序列" class="headerlink" title="子序列"></a>子序列</h3><p>slice</p>
<p>[start: end: step]</p>
<h3 id="加法"><a href="#加法" class="headerlink" title="加法"></a>加法</h3><ul>
<li>列表只能和列表相加</li>
<li>元组只能和元组相加</li>
<li>元组不能直接和列表相加</li>
</ul>
<h3 id="乘法"><a href="#乘法" class="headerlink" title="乘法"></a>乘法</h3><p>意义：列表或元组包含的元素重复N次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = (<span class="string">&quot;ll&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(l)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l</span> = (<span class="params"><span class="string">&quot;ll&quot;</span>,</span>)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span>(<span class="params">l</span>)</span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> &#x27;<span class="title">tuple</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="in运算符-1"><a href="#in运算符-1" class="headerlink" title="in运算符"></a>in运算符</h3><p>……</p>
<h3 id="长度、最大值和最小值"><a href="#长度、最大值和最小值" class="headerlink" title="长度、最大值和最小值"></a>长度、最大值和最小值</h3><p>一次比较每个字符的ASCII码值</p>
<h3 id="序列封包和序列解包"><a href="#序列封包和序列解包" class="headerlink" title="序列封包和序列解包"></a>序列封包和序列解包</h3><ul>
<li>程序将多个值赋给一个变量时，python会自动将多个值封装成元组，此为封包</li>
<li>程序允许将序列（元组列表等）直接赋值给多个变量，此时序列中的各元素会被依次赋值给每个变量（要求个数相等），此为解包</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 封包</span></span><br><span class="line">vals = <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span></span><br><span class="line"><span class="comment"># 解包</span></span><br><span class="line">a_tuple = <span class="built_in">tuple</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>))</span><br><span class="line">a, b, c, d, e = a_tuple</span><br><span class="line">a_list = [<span class="string">&#x27;xsad&#x27;</span>, <span class="string">&#x27;dsvsvf&#x27;</span>]</span><br><span class="line">a_str, b_str = a_list</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x, y, z = <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行过程如下：</span></span><br><span class="line">xyz = <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span></span><br><span class="line">x, y, z = xyz</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x, y, z = y, z, x</span><br></pre></td></tr></table></figure>

<ul>
<li>程序的解包时可以只解出部分变量，剩下的依然使用列表变量保存</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># first、second保存前两个元素，rest列表包含剩下的元素</span></span><br><span class="line">first, second, *rest = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(first)  <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(second) <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(rest)   <span class="comment"># [2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="comment"># last保存最后一个元素，begin保存前面剩下的</span></span><br><span class="line">begin, *last = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(begin)  <span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line"><span class="built_in">print</span>(last)   <span class="comment"># 9</span></span><br><span class="line"><span class="comment"># first保存第一个元素，last保存最后一个，middle保存中间剩下的</span></span><br><span class="line"><span class="built_in">print</span>(first)  <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(middle) <span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line"><span class="built_in">print</span>(last)   <span class="comment"># 9</span></span><br></pre></td></tr></table></figure>

<h2 id="使用列表"><a href="#使用列表" class="headerlink" title="使用列表"></a>使用列表</h2><h3 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h3><p>list()函数</p>
<p>tuple()函数</p>
<h3 id="增加列表元素"><a href="#增加列表元素" class="headerlink" title="增加列表元素"></a>增加列表元素</h3><ul>
<li>append()函数，会形成列表中嵌套列表，嵌套元组的情形</li>
<li>extent()函数，追加列表中的元素而不是将列表当做一个元素</li>
<li>insert()函数，指定位置插入元素</li>
</ul>
<h3 id="删除列表元素"><a href="#删除列表元素" class="headerlink" title="删除列表元素"></a>删除列表元素</h3><ul>
<li><p>del语句，可以删除列表元素及变量</p>
<ul>
<li><p>根据索引</p>
</li>
<li><p>可以删除列表中单个元素，也可以删除列表的中间一段</p>
</li>
<li><p>```python<br>del a_list[1: 3]  # 不包含<br>del a_list[1: -1: 2]  # 不包含，间隔为2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ remove()函数，根据元素的本身，只删除第一个，找不到抛出ValueError</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    c_list.remove(&#x27;csdsv&#x27;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>clear()方法，清空列表中所有元素</p>
<ul>
<li>```python<br>c_list.clear()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 修改列表元素</span><br><span class="line"></span><br><span class="line">+ 修改元素法增加、删除元素</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">b_list = list(range(1, 5))</span><br><span class="line">print(b_list)</span><br><span class="line"># 将第2个到第4个（不包含）元素赋值为新列表的元素</span><br><span class="line">b_list[1: 3] = [&#x27;a&#x27;, &#x27;b&#x27;]</span><br><span class="line">print(b_list)   # [1, &#x27;a&#x27;, &#x27;b&#x27;, 4]</span><br><span class="line"></span><br><span class="line"># 将第3个到第3个（不包含）元素赋值为新列表的元素，就是插入元素</span><br><span class="line">b_list[2:2] = [&#x27;x&#x27;, &#x27;y&#x27;]</span><br><span class="line">print(b_list)  # [1, &#x27;a&#x27;, &#x27;x&#x27;, &#x27;y&#x27;, &#x27;b&#x27;, 4]</span><br><span class="line"></span><br><span class="line"># 将第3个到第6个（不包含）元素赋值为空列表，就是删除元素</span><br><span class="line">b_list[2: 5] = []</span><br><span class="line">print(b_list)  # [1, &#x27;a&#x27;, 4]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>使用slice语法赋值时，不能使用单个值，使用字符串赋值python会自动把字符串当成序列处理，其中每一个字符都是一个元素</p>
<p>slice语法赋值时，如果使用step参数，则元素个数要保持一致</p>
<h3 id="列表中其他常用方法"><a href="#列表中其他常用方法" class="headerlink" title="列表中其他常用方法"></a>列表中其他常用方法</h3><ul>
<li>count()：用于统计列表中某个元素出现的次数</li>
<li>index()：用于判断某个元素在列表中出现的位置</li>
<li>pop()：用于将列表当做“栈”使用，实现元素出栈功能</li>
<li>reverse()：用于将列表中的元素反向存放</li>
<li>sort()：用于对列表元素排序</li>
</ul>
<h2 id="使用字典"><a href="#使用字典" class="headerlink" title="使用字典"></a>使用字典</h2><h3 id="创建字典"><a href="#创建字典" class="headerlink" title="创建字典"></a>创建字典</h3><p>元组可做key，列表不能，key要求为不可变的</p>
<p>使用dict()函数创建字典时，可以传入多个列表或元组参数作为key-value对</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vegetables = [(<span class="string">&#x27;celery&#x27;</span>, <span class="number">1.58</span>), (<span class="string">&#x27;brocoil&#x27;</span>, <span class="number">1.29</span>), (<span class="string">&#x27;lettuce&#x27;</span>, <span class="number">2.19</span>)]</span><br><span class="line">dict3 = <span class="built_in">dict</span>(vegetables)</span><br><span class="line">cars = [[<span class="string">&#x27;BWM&#x27;</span>, <span class="number">8.5</span>], [<span class="string">&#x27;bens&#x27;</span>, <span class="number">8.3</span>], [<span class="string">&#x27;AUDI&#x27;</span>, <span class="number">7.9</span>]]</span><br><span class="line">dict4 = <span class="built_in">dict</span>(cars)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict5 = <span class="built_in">dict</span>(spinach = <span class="number">1.39</span>, cabbage = <span class="number">2.59</span>) </span><br></pre></td></tr></table></figure>

<h3 id="字典的基本用法"><a href="#字典的基本用法" class="headerlink" title="字典的基本用法"></a>字典的基本用法</h3><ul>
<li>通过key访问value</li>
<li>通过key添加key-value对</li>
<li>通过key删除key-value对</li>
<li>通过key修改key-value对</li>
<li>通过key判断指定key-value对是否存在</li>
</ul>
<h3 id="字典的常用方法"><a href="#字典的常用方法" class="headerlink" title="字典的常用方法"></a>字典的常用方法</h3><ul>
<li><p>clear()：清空字典中所有key-value对</p>
</li>
<li><p>get()：根据key获取value，若不存在，直接访问报错，get方法None</p>
</li>
<li><p>update()：存在覆盖，不存在更新</p>
<ul>
<li>items()：获取字典中所有的key-value对</li>
<li>keys()：获取字典中所有的key</li>
<li>values()：获取字典中所有的value</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>cars = [[<span class="string">&#x27;BWM&#x27;</span>, <span class="number">8.5</span>], [<span class="string">&#x27;bens&#x27;</span>, <span class="number">8.3</span>], [<span class="string">&#x27;AUDI&#x27;</span>, <span class="number">7.9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>carss = <span class="built_in">dict</span>(cars)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>itms = carss.items()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(itms)</span><br><span class="line">dict_items([(<span class="string">&#x27;BWM&#x27;</span>, <span class="number">8.5</span>), (<span class="string">&#x27;bens&#x27;</span>, <span class="number">8.3</span>), (<span class="string">&#x27;AUDI&#x27;</span>, <span class="number">7.9</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(itms))</span><br><span class="line">[(<span class="string">&#x27;BWM&#x27;</span>, <span class="number">8.5</span>), (<span class="string">&#x27;bens&#x27;</span>, <span class="number">8.3</span>), (<span class="string">&#x27;AUDI&#x27;</span>, <span class="number">7.9</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(carss.keys()))</span><br><span class="line">[<span class="string">&#x27;BWM&#x27;</span>, <span class="string">&#x27;bens&#x27;</span>, <span class="string">&#x27;AUDI&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(carss.values()))</span><br><span class="line">[<span class="number">8.5</span>, <span class="number">8.3</span>, <span class="number">7.9</span>]</span><br></pre></td></tr></table></figure></li>
<li><p>pop()：用于获取指定key对应的value并删去此key-value</p>
</li>
<li><p>popitem()：随机弹出字典中的一个key-value（总是弹出底层存储的最后一个key-value）弹出格式为元组，可使用序列解包分别接受</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k, v = cars.popitem()</span><br></pre></td></tr></table></figure></li>
<li><p>setdefault()：default 默认的 根据key获取value，存在则直接返回，不存在则读取默认</p>
</li>
<li><p>fromkeys()：使用给定的多个key创建字典，value默认为None，也可以指定</p>
</li>
</ul>
<h3 id="使用字典格式化字符串"><a href="#使用字典格式化字符串" class="headerlink" title="使用字典格式化字符串"></a>使用字典格式化字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在字符串模板中使用key</span></span><br><span class="line">temp = <span class="string">&#x27;书名是：%(name)s，价格是%(price)010.2f，出版社是：%(publish)s&#x27;</span></span><br><span class="line">book = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;疯狂python&#x27;</span>, <span class="string">&#x27;price&#x27;</span>:<span class="number">118</span>, <span class="string">&#x27;publish&#x27;</span>:<span class="string">&#x27;地摊&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(temp % book)</span><br></pre></td></tr></table></figure>

<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="顺序结构"><a href="#顺序结构" class="headerlink" title="顺序结构"></a>顺序结构</h2><p>……</p>
<h2 id="if分支结构"><a href="#if分支结构" class="headerlink" title="if分支结构"></a>if分支结构</h2><p>使用if else分支语句时，一定要先处理包含范围更小的情形</p>
<h3 id="pass语句"><a href="#pass语句" class="headerlink" title="pass语句"></a>pass语句</h3><p>……</p>
<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><p>断言语句与if分支有些类似，它用于对一个bool表达式进行断言，如果该表达式为True，该程序可以继续向下执行；否则抛出AssertionError异常。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s_age = <span class="built_in">input</span>(<span class="string">&quot;请输入您的年龄：&quot;</span>)</span><br><span class="line">age = <span class="built_in">int</span>(s_age)</span><br><span class="line"><span class="keyword">assert</span> <span class="number">20</span> &lt; age &lt; <span class="number">80</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入的年龄在20和80之间&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>assert断言的逻辑：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件为<span class="literal">False</span>：</span><br><span class="line">	程序引发AssertionError异常</span><br></pre></td></tr></table></figure>

<h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>……</p>
<h3 id="while循环遍历"><a href="#while循环遍历" class="headerlink" title="while循环遍历"></a>while循环遍历</h3><p>……</p>
<h3 id="for-in循环"><a href="#for-in循环" class="headerlink" title="for-in循环"></a>for-in循环</h3><p>……</p>
<h3 id="for-in循环遍历"><a href="#for-in循环遍历" class="headerlink" title="for-in循环遍历"></a>for-in循环遍历</h3><p>……</p>
<h3 id="for-in循环遍历字典"><a href="#for-in循环遍历字典" class="headerlink" title="for-in循环遍历字典"></a>for-in循环遍历字典</h3><p>字典包含三种方法：</p>
<ul>
<li>items()</li>
<li>keys()</li>
<li>values()</li>
</ul>
<p>for-in循环遍历字典正是基于这三种方法读取的列表进行遍历</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> my_dict.keys():</span><br><span class="line">    <span class="built_in">print</span>(my_dict[key])</span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> my_dict.values():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="循环使用else"><a href="#循环使用else" class="headerlink" title="循环使用else"></a>循环使用else</h3><p>python的循环都可以定义else代码块，当循环条件为False时，程序会执行else代码块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count_i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count_i &lt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;count_i小于5：&#x27;</span>, count_i)</span><br><span class="line">    count_i += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;count_i大于或等于5：&#x27;</span>, count_i)</span><br></pre></td></tr></table></figure>

<p>这里else相当于print</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">count_i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count_i &lt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;count_i小于5：&#x27;</span>, count_i)</span><br><span class="line">    count_i += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;count_i大于或等于5：&#x27;</span>, count_i)</span><br></pre></td></tr></table></figure>

<p>循环的else是为了使python代码更优雅</p>
<p>在for循环中，else可以读取循环计数器的最后一个值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a_list = [<span class="number">330</span>, <span class="number">54</span>, <span class="number">5.68</span>, -<span class="number">56.2</span>, <span class="string">&#x27;dksoji&#x27;</span>, <span class="string">&#x27;dsjk&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> ele <span class="keyword">in</span> a_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;元素：&#x27;</span>, ele)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;else块值：&#x27;</span>, ele)</span><br></pre></td></tr></table></figure>

<h3 id="嵌套循环"><a href="#嵌套循环" class="headerlink" title="嵌套循环"></a>嵌套循环</h3><p>……</p>
<h3 id="for表达式"><a href="#for表达式" class="headerlink" title="for表达式"></a>for表达式</h3><ul>
<li><p>列表推导式</p>
<ul>
<li>```python<br>a_range = range(10)<br>b_list = [x * x for x in a_range if x % 2 == 0]<br>print(b_list)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 生成器推导式</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    a_range = range(10)</span><br><span class="line">    c_generator = (x * x for x in a_range if x % 2 == 0)</span><br><span class="line">    for i in c_generator:</span><br><span class="line">        print(i, end=&#x27;\t&#x27;)</span><br><span class="line">        </span><br><span class="line">    &gt;&gt;&gt; c_generator</span><br><span class="line">    &lt;generator object &lt;genexpr&gt; at 0x00000231A888A6D0&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>多循环列表推导式</p>
<ul>
<li>```python<br>e_list = [(x, y, z) for x in range(5) for y in range(4) for z in range(6)]<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  a_list = [5, 56, 89, 586, 2, 4898]</span><br><span class="line">  b_list = [5, 8, 69, 4]</span><br><span class="line">  c_list = [(x, y) for x in a_list for b in b_list if y % x == 0]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="常用工具函数"><a href="#常用工具函数" class="headerlink" title="常用工具函数"></a>常用工具函数</h3><ul>
<li><p>zip()：将多个列表压缩成一个zip对象（可迭代对象），且以更短列表为准</p>
</li>
<li><p>reversed()：</p>
<ul>
<li>```python<br>[x for x in reversed(b)]<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ sorted()：</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    sorted(a, reverse = True)</span><br><span class="line">    sorted(b, key=len)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="控制循环结构"><a href="#控制循环结构" class="headerlink" title="控制循环结构"></a>控制循环结构</h2><h3 id="使用break结束循环"><a href="#使用break结束循环" class="headerlink" title="使用break结束循环"></a>使用break结束循环</h3><p>……</p>
<h3 id="使用continue忽略本次循环剩下的语句"><a href="#使用continue忽略本次循环剩下的语句" class="headerlink" title="使用continue忽略本次循环剩下的语句"></a>使用continue忽略本次循环剩下的语句</h3><p>……</p>
<h3 id="使用return结束方法"><a href="#使用return结束方法" class="headerlink" title="使用return结束方法"></a>使用return结束方法</h3><p>return直接结束整个函数或方法，而不管return处于多少层循环</p>
<h1 id="函数和lambda表达式"><a href="#函数和lambda表达式" class="headerlink" title="函数和lambda表达式"></a>函数和lambda表达式</h1><h2 id="函数入门"><a href="#函数入门" class="headerlink" title="函数入门"></a>函数入门</h2><h3 id="定义函数和调用函数"><a href="#定义函数和调用函数" class="headerlink" title="定义函数和调用函数"></a>定义函数和调用函数</h3><p>……</p>
<h3 id="为函数提供文档"><a href="#为函数提供文档" class="headerlink" title="为函数提供文档"></a>为函数提供文档</h3><p>将一段字符串放在函数声明之后、函数体之前，这段字符串将被作为函数的部分，这个文档就是函数的说明文档</p>
<p>可以通过help函数和<code> __doc__</code>属性进行查看 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    hello world!</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="built_in">help</span>(func)</span><br><span class="line"><span class="built_in">print</span>(func.__doc__)</span><br></pre></td></tr></table></figure>

<h3 id="多个返回值"><a href="#多个返回值" class="headerlink" title="多个返回值"></a>多个返回值</h3><p>如果python函数直接返回多个值，python会自动将多个返回值封装成元组</p>
<p>此外，可以通过序列解包获取多个返回值</p>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>……</p>
<h2 id="函数的参数"><a href="#函数的参数" class="headerlink" title="函数的参数"></a>函数的参数</h2><h3 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h3><p>位置参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。</p>
<p>调用printme()函数，你必须传入一个参数，不然会出现语法错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span>(<span class="params"> <span class="built_in">str</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用 printme 函数，不加参数会报错</span></span><br><span class="line">printme()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;test.py&quot;</span>, line <span class="number">10</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    printme()</span><br><span class="line">TypeError: printme() missing <span class="number">1</span> required positional argument: <span class="string">&#x27;str&#x27;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h3><p>关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。</p>
<p>使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。</p>
<p>以下实例在函数 printme() 调用时使用参数名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span>(<span class="params"> <span class="built_in">str</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printme函数</span></span><br><span class="line">printme( <span class="built_in">str</span> = <span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br></pre></td></tr></table></figure>
</blockquote>
<p>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> name, age </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printinfo函数</span></span><br><span class="line">printinfo( age=<span class="number">50</span>, name=<span class="string">&quot;zhangsan&quot;</span> )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">名字:  zhangsan</span><br><span class="line">年龄:  <span class="number">50</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="参数的默认值"><a href="#参数的默认值" class="headerlink" title="参数的默认值"></a>参数的默认值</h3><p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入 age 参数，则使用默认值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> name, age = <span class="number">35</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的字符串&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;名字: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;年龄: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#调用printinfo函数</span></span><br><span class="line">printinfo( age=<span class="number">50</span>, name=<span class="string">&quot;runoob&quot;</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">printinfo( name=<span class="string">&quot;runoob&quot;</span> )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">名字:  runoob</span><br><span class="line">年龄:  <span class="number">50</span></span><br><span class="line">------------------------</span><br><span class="line">名字:  runoob</span><br><span class="line">年龄:  <span class="number">35</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>未指定成为关键字参数的位置参数必须按照函数的定义位置顺序</li>
<li>关键字参数必须位于位置参数后面（调用和定义）</li>
<li>默认参数定义在形参列表后面</li>
</ul>
<h3 id="参数收集（个数可变的参数）"><a href="#参数收集（个数可变的参数）" class="headerlink" title="参数收集（个数可变的参数）"></a>参数收集（个数可变的参数）</h3><p>可以在调用函数时传入任意多个参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span>(<span class="params">[formal_args,] *var_args_tuple </span>):</span></span><br><span class="line">   <span class="string">&quot;函数_文档字符串&quot;</span></span><br><span class="line">   function_suite</span><br><span class="line">   <span class="keyword">return</span> [expression]</span><br></pre></td></tr></table></figure>

<p>加了星号 ***** 的参数会以元组(tuple)的形式导入，存放所有未命名的变量参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, *vartuple </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (vartuple)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用printinfo 函数</span></span><br><span class="line">printinfo( <span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span> )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输出: </span><br><span class="line"><span class="number">70</span></span><br><span class="line">(<span class="number">60</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, *vartuple </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</span><br><span class="line">      <span class="built_in">print</span> (var)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用printinfo 函数</span></span><br><span class="line">printinfo( <span class="number">10</span> )</span><br><span class="line">printinfo( <span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span> )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">输出:</span><br><span class="line"><span class="number">10</span></span><br><span class="line">输出:</span><br><span class="line"><span class="number">70</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="number">50</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>此外，python还可以收集关键字参数，在参数面前**表示，</p>
<p>一个函数可以同时包括一个支持“普通“参数收集的参数和一个支持关键字参数收集的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, *hello, **vardict </span>):</span></span><br><span class="line">   <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;输出: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (hello)</span><br><span class="line">   <span class="built_in">print</span> (vardict)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用printinfo 函数</span></span><br><span class="line">printinfo(<span class="number">1</span>, <span class="string">&quot;你好&quot;</span>, <span class="string">&quot;hi&quot;</span>, a=<span class="number">2</span>,b=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上实例输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输出: </span><br><span class="line"><span class="number">1</span></span><br><span class="line">你好</span><br><span class="line">hi</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>声明函数时，参数中星号 ***** 可以单独出现，例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a,b,*,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b+c</span><br></pre></td></tr></table></figure>

<p>如果单独出现星号 ***** 后的参数必须用关键字传入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a,b,*,c</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a+b+c</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)   <span class="comment"># 报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: f() takes <span class="number">2</span> positional arguments but <span class="number">3</span> were given</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">1</span>,<span class="number">2</span>,c=<span class="number">3</span>) <span class="comment"># 正常</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<h3 id="逆向参数收集"><a href="#逆向参数收集" class="headerlink" title="逆向参数收集"></a>逆向参数收集</h3><p>逆向参数收集，是指在程序已有列表、元组、字典等对象的前提下，把它们的元素“拆开”后传给函数的参数</p>
<p>逆向参数收集需要在传入的列表、元组参数之前添加一个星号，在字典参数之前添加两个星号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">name, message</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;用户是：&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;欢迎消息：&#x27;</span>, message)</span><br><span class="line"></span><br><span class="line">my_list = [<span class="string">&#x27;孙悟空&#x27;</span>, <span class="string">&#x27;欢迎来到水帘洞&#x27;</span>]</span><br><span class="line">test(*my_list)</span><br></pre></td></tr></table></figure>

<p>实际上，即使是支持收集的参数，如果程序需要将一个元组传给该参数，那么同样需要使用逆向收集，例如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">name, *nums</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name参数:&#x27;</span>, name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;nums参数:&#x27;</span>, nums)</span><br><span class="line"></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">foo(<span class="string">&#x27;fkit&#x27;</span>, *my_tuple)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>输出如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name参数：fkit</span><br><span class="line">nums参数：（<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span>）</span><br></pre></td></tr></table></figure>
</blockquote>
<p>使用逆向收集，my_tuple第一个元素传给name参数，剩下的传给nums参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(*my_tuple)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>输出如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name参数：<span class="number">1</span></span><br><span class="line">nums参数：（<span class="number">2</span>，<span class="number">3</span>）</span><br></pre></td></tr></table></figure>
</blockquote>
<p>如果不使用逆向收集，整个元组将作为一个参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo(my_tuple)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出</span></span><br><span class="line">name参数：（<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span>）</span><br><span class="line">nums参数：（）</span><br></pre></td></tr></table></figure>

<p>字典也支持逆向收集，字典将会以关键字的形式传入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">book, price, desc</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(book, <span class="string">&#x27;这本书的价格是：&#x27;</span>, price)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;描述信息：&#x27;</span>, desc)</span><br><span class="line"></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;price&#x27;</span>:<span class="number">89</span>, <span class="string">&#x27;book&#x27;</span>:<span class="string">&#x27;疯狂python讲义&#x27;</span>, <span class="string">&#x27;desc&#x27;</span>:<span class="string">&#x27;这是一本系统全面的python学习图书&#x27;</span>&#125;</span><br><span class="line">bar(**mydict)</span><br></pre></td></tr></table></figure>

<h3 id="函数的参数传递机制"><a href="#函数的参数传递机制" class="headerlink" title="函数的参数传递机制"></a>函数的参数传递机制</h3><ul>
<li>在python函数中对参数直接使用“=”符号赋值没有用</li>
<li>如果让函数修改某些数据，可以封装成列表字典等可变对象，再作为参数传入函数</li>
</ul>
<h3 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h3><ul>
<li>局部变量</li>
<li>全局变量<ul>
<li>globals()：返回全局范围内所有变量组成的“变量字典”</li>
<li>locals()：返回当前局部范围内所有变量组成的“变量字典”</li>
<li>vars(object)：获取在指定对象范围内所有变量组成的“变量字典”<ul>
<li>locals()在全局范围内调用=globals()</li>
<li>globals()生成的字典修改会改变全局变量本身，locals()字典修改不会改变局部变量本身</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>局部遮蔽全局变量的处理：</p>
<ol>
<li><p>访问一下被遮蔽的全局变量</p>
</li>
<li><p>在函数中声明全局变量  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">global</span> name</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="局部函数"><a href="#局部函数" class="headerlink" title="局部函数"></a>局部函数</h2><p>当出现局部函数内的变量遮蔽它所在函数内的局部变量时，可以定义nonlocal</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nonlocal</span> name</span><br></pre></td></tr></table></figure>

<p>区别：</p>
<ul>
<li>global：声明全局变量</li>
<li>nonlocal：声明访问当前函数所在函数内的局部变量</li>
</ul>
<h2 id="函数的高级内容"><a href="#函数的高级内容" class="headerlink" title="函数的高级内容"></a>函数的高级内容</h2><h3 id="使用函数变量"><a href="#使用函数变量" class="headerlink" title="使用函数变量"></a>使用函数变量</h3><p>当把函数赋值给变量之后，接下来程序也可通过变量来调用函数</p>
<h3 id="使用函数作为函数形参"><a href="#使用函数作为函数形参" class="headerlink" title="使用函数作为函数形参"></a>使用函数作为函数形参</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span>(<span class="params">func, *args, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(func(*args, **kwargs))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_b</span>(<span class="params">*args</span>):</span></span><br><span class="line">    <span class="keyword">return</span> args</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func_a(func_b, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>在代码中，将函数func_b作为函数func_a的参数传入，将函数func_b的参数以元组args传入，并在调用func_b时，作为func_b的参数。</p>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>但是这里存在一个问题，但func_a和func_b需要同名的参数时，就会出现异常，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span>(<span class="params">arg_a, func, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line">    <span class="built_in">print</span>(func(**kwargs))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_b</span>(<span class="params">arg_a</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func_a(arg_a=<span class="string">&#x27;Hello Python&#x27;</span>, func=func_b)</span><br></pre></td></tr></table></figure>

<p>异常信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: func_b() missing <span class="number">1</span> required positional argument: <span class="string">&#x27;arg_a&#x27;</span></span><br></pre></td></tr></table></figure>

<p>虽然通过修改，手动将arg_a作为参数传入func中进行调用，可以正常运行，但这明显不符合设计初衷：在func_a中执行func(**kwargs)时，很可能并不知道func到底需要什么参数。换句话说，如果已经提前知道需要调用什么函数，那完全不必要把函数作为参数传入另一个函数并调用，直接调用函数即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span>(<span class="params">arg_a, func, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line">    func(arg_a=arg_a, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_b</span>(<span class="params">arg_a</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func_a(arg_a=<span class="string">&#x27;Hello Python&#x27;</span>, func=func_b)</span><br></pre></td></tr></table></figure>

<p>当加入第三个函数，func_c，它不需要arg_a这个参数时，就会出现问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span>(<span class="params">arg_a, func, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line">    func(arg_a=arg_a, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_b</span>(<span class="params">arg_a</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_c</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func_a(arg_a=<span class="string">&#x27;Hello Python&#x27;</span>, func=func_b)</span><br><span class="line">    func_a(arg_a=<span class="string">&#x27;Hello Python&#x27;</span>, func=func_c)</span><br></pre></td></tr></table></figure>

<p>异常结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: func_c() got an unexpected keyword argument <span class="string">&#x27;arg_a&#x27;</span></span><br></pre></td></tr></table></figure>

<p>目前想到的解决办法是尽量避免func_a存在跟其他函数相同的参数，比如把func_a的arg_a参数改成func_a_arg_a。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_a</span>(<span class="params">func_a_arg_a, func, **kwargs</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(func_a_arg_a)</span><br><span class="line">    func(**kwargs)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_b</span>(<span class="params">arg_a</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(arg_a)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_c</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    func_a(func_a_arg_a=<span class="string">&#x27;temp&#x27;</span>, arg_a=<span class="string">&#x27;Hello Python&#x27;</span>, func=func_b)</span><br><span class="line">    func_a(func_a_arg_a=<span class="string">&#x27;temp&#x27;</span>, func=func_c)</span><br></pre></td></tr></table></figure>

<h3 id="使用函数作为返回值"><a href="#使用函数作为返回值" class="headerlink" title="使用函数作为返回值"></a>使用函数作为返回值</h3><p>函数作为返回值<br>高阶函数除了可以接收函数作为参数外，还可以把函数作为结果值返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span>(<span class="params">*args</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span>():</span></span><br><span class="line">        ax=<span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        　　ax = ax + n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line">f = lazy_sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span> f</span><br><span class="line"><span class="comment"># &lt;function sum at 0x02657770&gt;</span></span><br><span class="line"><span class="comment"># lazy_sum(1,2,3,4,5)返回的是一个指向求和的函数的函数名。</span></span><br><span class="line"><span class="comment"># 在调用lazy_sum(1,2,3,4,5)的时候，不立刻求和，而是根据后面代码的需要在计算。</span></span><br><span class="line"><span class="built_in">print</span> f()</span><br><span class="line"><span class="comment"># 15</span></span><br><span class="line"><span class="comment"># 用f()调用求和函数，计算出结果。</span></span><br><span class="line"></span><br><span class="line">f1 = lazy_sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">f2 = lazy_sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span> f1 == f2</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="comment"># lazy_sum()每调用一次，都会返回一个独一无二的函数地址。</span></span><br></pre></td></tr></table></figure>

<p>例中，lazy_sum中的内部函数sum引用了外部函数lazy_sum的参数和局部变量，<br>当lazy_sum返回函数sum时，相关参数和变量已经保存在返回的函数sum中了。<br>我们称这为 <strong>闭包</strong>。</p>
<p>注意到返回的函数在其定义内部引用了局部变量<code>args</code>，所以，当一个函数返回了一个函数后，其内部的局部变量还被新函数引用，所以，闭包用起来简单，实现起来可不容易。</p>
<p>另一个需要注意的问题是，返回的函数并没有立刻执行，而是直到调用了<code>f()</code>才执行。我们来看一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">　　fs = []</span><br><span class="line">　　<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line">　　　　<span class="function"><span class="keyword">def</span> <span class="title">f</span>():</span></span><br><span class="line">　　　　　　<span class="keyword">return</span> i*i</span><br><span class="line">　　　　fs.append(f)</span><br><span class="line">　　<span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"><span class="built_in">print</span> f1()</span><br><span class="line"><span class="built_in">print</span> f2()</span><br><span class="line"><span class="built_in">print</span> f3()</span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"><span class="comment"># 9</span></span><br></pre></td></tr></table></figure>

<p>结果全部都是9. 不是预期的1,4,9！</p>
<p>遂在编辑器中不断更改并调试运行观察变量的变化过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span>():</span></span><br><span class="line">            <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line"><span class="comment"># f1, f2, f3 = count()</span></span><br><span class="line"><span class="comment">#将上述代码分开写：</span></span><br><span class="line">f1 = count()</span><br><span class="line">f2 = count()</span><br><span class="line">f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1())</span><br><span class="line"><span class="built_in">print</span>(f2())</span><br><span class="line"><span class="built_in">print</span>(f3())</span><br></pre></td></tr></table></figure>

<p>结果编译器报错：</p>
<blockquote>
<p>Traceback (most recent call last):<br>File “***.py”, line 16, in <module><br>print(f1())<br>TypeError: ‘list’ object is not callable</module></p>
</blockquote>
<p>f1 = count()这条语句执行时，count()函数会先执行，并将结果fs（这是一个包含三个元素（值是三个不同函数）的<strong>list！</strong>）返还f1。所以f1()是将list当函数用，故报错！</p>
<p>f2 = count()和f3 = count()也是这个道理。</p>
<p>所以第一个要弄清楚的是 ：初始代码中的f1, f2, f3 = count()是将count() 中返回值（list）的三个元素（元素值是函数）分别赋值给f1,f2,f3!此时它们是函数！</p>
<p>修改代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span>():</span></span><br><span class="line">            <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line"><span class="comment"># f1, f2, f3 = count()</span></span><br><span class="line">f1 = count()</span><br><span class="line">f2 = count()</span><br><span class="line">f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1[<span class="number">0</span>]())</span><br><span class="line"><span class="built_in">print</span>(f2[<span class="number">0</span>]())</span><br><span class="line"><span class="built_in">print</span>(f3[<span class="number">0</span>]())</span><br></pre></td></tr></table></figure>

<p>结果仍然是：</p>
<p>9</p>
<p>9</p>
<p>9</p>
<p> 因为<code>f1[0]()</code>中存放的就是函数f, 但此时i是3，故返回输出9！</p>
<p> 所以返回闭包时牢记一点：返回函数不要引用任何循环变量，或者后续会发生变化的变量。</p>
<p>网上例子，有稍许啰嗦</p>
<h2 id="局部函数与lambda表达式"><a href="#局部函数与lambda表达式" class="headerlink" title="局部函数与lambda表达式"></a>局部函数与lambda表达式</h2><h3 id="回顾局部函数"><a href="#回顾局部函数" class="headerlink" title="回顾局部函数"></a>回顾局部函数</h3><p>……</p>
<h3 id="使用lambda表达式代替局部函数"><a href="#使用lambda表达式代替局部函数" class="headerlink" title="使用lambda表达式代替局部函数"></a>使用lambda表达式代替局部函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [parameter_list]: 表达式</span><br></pre></td></tr></table></figure>

<ul>
<li>lambda表达式必须使用lambda关键字定义</li>
<li>在lambda关键字后，冒号左边是参数列表，可以没有参数，也可以有多个参数，逗号隔开，冒号右边是lambda表达式的返回值</li>
</ul>
<p>用途：</p>
<ul>
<li>单行函数，省去了定义函数的过程，代码更加简洁</li>
<li>对于不需要多次使用的函数，lambda使用完后可以立即释放，提高了性能</li>
</ul>
<h1 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h1><h2 id="类和对象-1"><a href="#类和对象-1" class="headerlink" title="类和对象"></a>类和对象</h2><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><ul>
<li><code>__init__</code>：构造方法，用于构造该类的对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="对象的产生和使用"><a href="#对象的产生和使用" class="headerlink" title="对象的产生和使用"></a>对象的产生和使用</h3><p>创建对象的根本途径是构造方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, score</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br><span class="line">        </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student(<span class="string">&#x27;Bart Simpson&#x27;</span>, <span class="number">59</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.name</span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.score</span><br><span class="line"><span class="number">59</span></span><br></pre></td></tr></table></figure>

<ul>
<li>动态增加实例变量</li>
<li>动态删除实例变量 del</li>
</ul>
<p>为P对象动态增加方法，python不会自动将调用者自动绑定到第一个参数（即使将第一个参数命名为self也没用）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先定义一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">info</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---info函数---&quot;</span>, self)</span><br><span class="line"><span class="comment"># 使用info对p的foo方法赋值（动态增加方法）</span></span><br><span class="line">p.foo = info</span><br><span class="line"><span class="comment"># python不会自动将调用者绑定到第一个参数</span></span><br><span class="line"><span class="comment"># 因此程序需要手动将调用者绑定到第一参数</span></span><br><span class="line">p.foo(p)</span><br><span class="line"></span><br><span class="line">p.bar = <span class="keyword">lambda</span> self: <span class="built_in">print</span>(<span class="string">&quot;--lambda表达式---&quot;</span>, self)</span><br><span class="line">p.bar(p)</span><br></pre></td></tr></table></figure>

<p>如果希望动态增加的方法也能自动绑定到第一个参数，则可借助于types模块下的MethodType进行包装</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">intro_func</span>(<span class="params">self, content</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是一个人，信息为：%s&quot;</span> % content)</span><br><span class="line"><span class="comment"># 导入MethodType</span></span><br><span class="line"><span class="keyword">from</span> types <span class="keyword">import</span> MethodType</span><br><span class="line"><span class="comment"># 使用MethodType对intro_func进行包装，将该函数的第一个参数绑定为p</span></span><br><span class="line">p.intro = MethodType(intro_func, p)</span><br><span class="line"><span class="comment"># 第一个参数已经绑定了，无须传入</span></span><br><span class="line">p.intro(<span class="string">&quot;生活在别处&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="实例方法和自动绑定self"><a href="#实例方法和自动绑定self" class="headerlink" title="实例方法和自动绑定self"></a>实例方法和自动绑定self</h3><p>对于类中定义的实例方法，python会自动绑定方法的第一个参数，第一个参数总是指向调用该方法的对象</p>
<ul>
<li>在构造方法中引用该构造方法正在初始化的对象</li>
<li>在普通实例方法中引用调用该方法的对象</li>
</ul>
<p>当self参数作为对象的默认引用时，程序可以像访问普通变量一样来访问这个self参数，甚至可以把self参数当成实例方法的返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReturnSelf</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">grow</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;age&#x27;</span>):</span><br><span class="line">            self.age += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.age = <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">rs = ReturnSelf()</span><br><span class="line">rs.grow().grow().grow()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;rs的age属性值是：&quot;</span>, rs.age)</span><br><span class="line"><span class="comment"># 简洁，确可能造成实际意义的模糊</span></span><br></pre></td></tr></table></figure>

<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="类也能调用实例方法"><a href="#类也能调用实例方法" class="headerlink" title="类也能调用实例方法"></a>类也能调用实例方法</h3><p>使用类调用实例方法的第一个参数要绑定</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span> (<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(self, <span class="string">&#x27;正在走&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">u = User()</span><br><span class="line"></span><br><span class="line">User.walk(u)</span><br><span class="line"></span><br><span class="line">&lt;__main__.User <span class="built_in">object</span> at <span class="number">0x0000015AD3CB1F48</span>&gt; 正在走</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">User.walk(User)</span><br><span class="line"></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">User</span>&#x27;&gt; 正在走</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">User</span>.<span class="title">walk</span>(<span class="params"><span class="string">&#x27;fg&#x27;</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">fg</span> 正在走</span></span><br></pre></td></tr></table></figure>

<h3 id="类方法与静态方法"><a href="#类方法与静态方法" class="headerlink" title="类方法与静态方法"></a>类方法与静态方法</h3><p>python支持定义类方法，甚至定义静态方法。</p>
<p>python会自动绑定类方法的第一个参数，类方法的第一个参数（通常建议参数名为cls）会自动绑定到类本身；静态方法则不会自动绑定。</p>
<p>类方法：@classmethod</p>
<p>静态方法：@staticmethod</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;类方法fly：&#x27;</span>, fly)</span><br><span class="line">        </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info</span>(<span class="params">p</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;静态方法info：&#x27;</span>, p)</span><br><span class="line">        </span><br><span class="line">Bird.fly()</span><br><span class="line">Bird.info(<span class="string">&#x27;crazyit&#x27;</span>)</span><br><span class="line"></span><br><span class="line">b = Bird()</span><br><span class="line">b.fly()</span><br><span class="line">b.info(<span class="string">&#x27;fkit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="函数装饰器"><a href="#函数装饰器" class="headerlink" title="@函数装饰器"></a>@函数装饰器</h3><p>使用“@函数”（A）装饰另一个函数（B）：</p>
<ol>
<li>将被修饰的函数（B）作为参数传给@符号引用的函数（A）</li>
<li>将（B）替换（装饰）城成第一步的返回值</li>
</ol>
<p>下面资料来源于网络：</p>
<p>函数中返回函数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hi</span>(<span class="params">name=<span class="string">&quot;yasoob&quot;</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">greet</span>():</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;now you are in the greet() function&quot;</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">welcome</span>():</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;now you are in the welcome() function&quot;</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&quot;yasoob&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> greet</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> welcome</span><br><span class="line"> </span><br><span class="line">a = hi()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment">#outputs: &lt;function greet at 0x7f2143c01500&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#上面清晰地展示了`a`现在指向到hi()函数中的greet()函数</span></span><br><span class="line"><span class="comment">#现在试试这个</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(a())</span><br><span class="line"><span class="comment">#outputs: now you are in the greet() function</span></span><br></pre></td></tr></table></figure>

<p>在 if/else 语句中我们返回 greet 和 welcome，而不是 greet() 和 welcome()。为什么那样？这是因为当你把一对小括号放在后面，这个函数就会执行；然而如果你不放括号在它后面，那它可以被到处传递，并且可以赋值给别的变量而不去执行它。 </p>
<p>将函数作为参数传给另一个函数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hi</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hi yasoob!&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doSomethingBeforeHi</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing hi()&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(func())</span><br><span class="line"> </span><br><span class="line">doSomethingBeforeHi(hi)</span><br><span class="line"><span class="comment">#outputs:I am doing some boring work before executing hi()</span></span><br><span class="line"><span class="comment">#        hi yasoob!</span></span><br></pre></td></tr></table></figure>

<p>装饰器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_new_decorator</span>(<span class="params">a_func</span>):</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapTheFunction</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">        a_func()</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work after executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> wrapTheFunction</span><br><span class="line"></span><br><span class="line"><span class="meta">@a_new_decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_function_requiring_decoration</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Hey you! Decorate me!&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to &quot;</span></span><br><span class="line">          <span class="string">&quot;remove my foul smell&quot;</span>)</span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs: I am doing some boring work before executing a_func()</span></span><br><span class="line"><span class="comment">#         I am the function which needs some decoration to remove my foul smell</span></span><br><span class="line"><span class="comment">#         I am doing some boring work after executing a_func()</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#the @a_new_decorator is just a short way of saying:</span></span><br><span class="line">a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)</span><br></pre></td></tr></table></figure>

<p>在对 Python 装饰器的工作原理有一个基本的理解。如果我们运行如下代码会存在一个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a_function_requiring_decoration.__name__)</span><br><span class="line"><span class="comment"># Output: wrapTheFunction</span></span><br></pre></td></tr></table></figure>

<p>这并不是我们想要的！Ouput输出应该是”a_function_requiring_decoration”。这里的函数被warpTheFunction替代了。它重写了我们函数的名字和注释文档(docstring)。幸运的是Python提供给我们一个简单的函数来解决这个问题，那就是functools.wraps。我们修改上一个例子来使用functools.wraps：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_new_decorator</span>(<span class="params">a_func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">a_func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapTheFunction</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing a_func()&quot;</span>)</span><br><span class="line">        a_func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work after executing a_func()&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapTheFunction</span><br><span class="line"> </span><br><span class="line"><span class="meta">@a_new_decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_function_requiring_decoration</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Hey yo! Decorate me!&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to &quot;</span></span><br><span class="line">          <span class="string">&quot;remove my foul smell&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(a_function_requiring_decoration.__name__)</span><br><span class="line"><span class="comment"># Output: a_function_requiring_decoration</span></span><br></pre></td></tr></table></figure>

<p>蓝本规范：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_name</span>(<span class="params">f</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">f</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorated</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> can_run:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Function will not run&quot;</span></span><br><span class="line">        <span class="keyword">return</span> f(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> decorated</span><br><span class="line"> </span><br><span class="line"><span class="meta">@decorator_name</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    <span class="keyword">return</span>(<span class="string">&quot;Function is running&quot;</span>)</span><br><span class="line"> </span><br><span class="line">can_run = <span class="literal">True</span></span><br><span class="line"><span class="built_in">print</span>(func())</span><br><span class="line"><span class="comment"># Output: Function is running</span></span><br><span class="line"> </span><br><span class="line">can_run = <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(func())</span><br><span class="line"><span class="comment"># Output: Function will not run</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：@wraps</strong>接受一个函数来进行装饰，并加入了复制函数名称、注释文档、参数列表等等的功能。这可以让我们在装饰器里面访问在装饰之前的函数的属性。</p>
<p>使用场景：</p>
<p>授权：</p>
<p>装饰器能有助于检查某个人是否被授权去使用一个web应用的端点(endpoint)。它们被大量使用于Flask和Django web框架中。这里是一个例子来使用基于装饰器的授权：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">requires_auth</span>(<span class="params">f</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">f</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorated</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        auth = request.authorization</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> auth <span class="keyword">or</span> <span class="keyword">not</span> check_auth(auth.username, auth.password):</span><br><span class="line">            authenticate()</span><br><span class="line">        <span class="keyword">return</span> f(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> decorated</span><br></pre></td></tr></table></figure>

<p>日志：</p>
<p>日志是装饰器运用的另一个亮点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logit</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">with_logging</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(func.__name__ + <span class="string">&quot; was called&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> with_logging</span><br><span class="line"> </span><br><span class="line"><span class="meta">@logit</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addition_func</span>(<span class="params">x</span>):</span></span><br><span class="line">   <span class="string">&quot;&quot;&quot;Do some math.&quot;&quot;&quot;</span></span><br><span class="line">   <span class="keyword">return</span> x + x</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">result = addition_func(<span class="number">4</span>)</span><br><span class="line"><span class="comment"># Output: addition_func was called</span></span><br></pre></td></tr></table></figure>

<p>带参数的装饰器：</p>
<p>在函数中嵌入装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logit</span>(<span class="params">logfile=<span class="string">&#x27;out.log&#x27;</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">logging_decorator</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">        @wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapped_function</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">            log_string = func.__name__ + <span class="string">&quot; was called&quot;</span></span><br><span class="line">            <span class="built_in">print</span>(log_string)</span><br><span class="line">            <span class="comment"># 打开logfile，并写入内容</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(logfile, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> opened_file:</span><br><span class="line">                <span class="comment"># 现在将日志打到指定的logfile</span></span><br><span class="line">                opened_file.write(log_string + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapped_function</span><br><span class="line">    <span class="keyword">return</span> logging_decorator</span><br><span class="line"> </span><br><span class="line"><span class="meta">@logit()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc1</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line">myfunc1()</span><br><span class="line"><span class="comment"># Output: myfunc1 was called</span></span><br><span class="line"><span class="comment"># 现在一个叫做 out.log 的文件出现了，里面的内容就是上面的字符串</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">@logit(<span class="params">logfile=<span class="string">&#x27;func2.log&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc2</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line">myfunc2()</span><br><span class="line"><span class="comment"># Output: myfunc2 was called</span></span><br><span class="line"><span class="comment"># 现在一个叫做 func2.log 的文件出现了，里面的内容就是上面的字符串</span></span><br></pre></td></tr></table></figure>

<p>装饰器类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">logit</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, logfile=<span class="string">&#x27;out.log&#x27;</span></span>):</span></span><br><span class="line">        self.logfile = logfile</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, func</span>):</span></span><br><span class="line"><span class="meta">        @wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapped_function</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">            log_string = func.__name__ + <span class="string">&quot; was called&quot;</span></span><br><span class="line">            <span class="built_in">print</span>(log_string)</span><br><span class="line">            <span class="comment"># 打开logfile并写入</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(self.logfile, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> opened_file:</span><br><span class="line">                <span class="comment"># 现在将日志打到指定的文件</span></span><br><span class="line">                opened_file.write(log_string + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            <span class="comment"># 现在，发送一个通知</span></span><br><span class="line">            self.notify()</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapped_function</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># logit只打日志，不做别的</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>现在，我们给 logit 创建子类，来添加 email 的功能(虽然 email 这个话题不会在这里展开)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">email_logit</span>(<span class="params">logit</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    一个logit的实现版本，可以在函数调用时发送email给管理员</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, email=<span class="string">&#x27;admin@myproject.com&#x27;</span>, *args, **kwargs</span>):</span></span><br><span class="line">        self.email = email</span><br><span class="line">        <span class="built_in">super</span>(email_logit, self).__init__(*args, **kwargs)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 发送一封email到self.email</span></span><br><span class="line">        <span class="comment"># 这里就不做实现了</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>装饰器执行顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_a</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Get in decorator_a&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_a</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Get in inner_a&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner_a</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_b</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Get in decorator_b&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_b</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Get in inner_b&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner_b</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator_b</span></span><br><span class="line"><span class="meta">@decorator_a</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Get in f&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行结果：</span></span><br><span class="line"><span class="comment"># Get in decorator_a</span></span><br><span class="line"><span class="comment"># Get in decorator_b</span></span><br><span class="line"></span><br><span class="line">f(<span class="number">1</span>)</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">实际上运行的结果如下:</span><br><span class="line"></span><br><span class="line">Get <span class="keyword">in</span> decorator_a</span><br><span class="line">Get <span class="keyword">in</span> decorator_b</span><br><span class="line">Get <span class="keyword">in</span> inner_b</span><br><span class="line">Get <span class="keyword">in</span> inner_a</span><br><span class="line">Get <span class="keyword">in</span> f</span><br></pre></td></tr></table></figure>

<p>在实际应用的场景中，当我们采用上面的方式写了两个装饰方法比如先验证有没有登录 <code>@login_required</code> ， 再验证权限够不够时 <code>@permision_allowed</code> 时，我们采用下面的顺序来装饰函数:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@login_required</span></span><br><span class="line"><span class="variable">@permision_allowed</span></span><br><span class="line">def f()</span><br><span class="line">  # Do something</span><br><span class="line">  return</span><br></pre></td></tr></table></figure>

<h3 id="再论类命名空间"><a href="#再论类命名空间" class="headerlink" title="再论类命名空间"></a>再论类命名空间</h3><p>……</p>
<h2 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h2><h3 id="类变量和实例变量"><a href="#类变量和实例变量" class="headerlink" title="类变量和实例变量"></a>类变量和实例变量</h3><p>……</p>
<h3 id="使用property函数定义属性"><a href="#使用property函数定义属性" class="headerlink" title="使用property函数定义属性"></a>使用property函数定义属性</h3><p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017502538658208#0">https://www.liaoxuefeng.com/wiki/1016959663602400/1017502538658208#0</a></p>
<p>在绑定属性时，如果我们直接把属性暴露出去，虽然写起来很简单，但是，没办法检查参数，导致可以把成绩随便改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = Student()</span><br><span class="line">s.score = <span class="number">9999</span></span><br></pre></td></tr></table></figure>

<p>这显然不合逻辑。为了限制score的范围，可以通过一个<code>set_score()</code>方法来设置成绩，再通过一个<code>get_score()</code>来获取成绩，这样，在<code>set_score()</code>方法里，就可以检查参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_score</span>(<span class="params">self</span>):</span></span><br><span class="line">         <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_score</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must be an integer!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must between 0 ~ 100!&#x27;</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure>

<p>现在，对任意的Student实例进行操作，就不能随心所欲地设置score了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.set_score(<span class="number">60</span>) <span class="comment"># ok!</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.get_score()</span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.set_score(<span class="number">9999</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: score must between <span class="number">0</span> ~ <span class="number">100</span>!</span><br></pre></td></tr></table></figure>

<p>但是，上面的调用方法又略显复杂，没有直接用属性这么直接简单。</p>
<p>有没有既能检查参数，又可以用类似属性这样简单的方式来访问类的变量呢？对于追求完美的Python程序员来说，这是必须要做到的！</p>
<p>还记得装饰器（decorator）可以给函数动态加上功能吗？对于类的方法，装饰器一样起作用。Python内置的<code>@property</code>装饰器就是负责把一个方法变成属性调用的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line"><span class="meta">    @score.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must be an integer!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must between 0 ~ 100!&#x27;</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure>

<p><code>@property</code>的实现比较复杂，我们先考察如何使用。把一个getter方法变成属性，只需要加上<code>@property</code>就可以了，此时，<code>@property</code>本身又创建了另一个装饰器<code>@score.setter</code>，负责把一个setter方法变成属性赋值，于是，我们就拥有一个可控的属性操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">60</span> <span class="comment"># OK，实际转化为s.set_score(60)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score <span class="comment"># OK，实际转化为s.get_score()</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">9999</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: score must between <span class="number">0</span> ~ <span class="number">100</span>!</span><br></pre></td></tr></table></figure>

<p>注意到这个神奇的<code>@property</code>，我们在对实例属性操作的时候，就知道该属性很可能不是直接暴露的，而是通过getter和setter方法来实现的。</p>
<p>还可以定义只读属性，只定义getter方法，不定义setter方法就是一个只读属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._birth</span><br><span class="line"></span><br><span class="line"><span class="meta">    @birth.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        self._birth = value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2015</span> - self._birth</span><br></pre></td></tr></table></figure>

<p>上面的<code>birth</code>是可读写属性，而<code>age</code>就是一个<em>只读</em>属性，因为<code>age</code>可以根据<code>birth</code>和当前时间计算出来。</p>
<p>要特别注意：属性的方法名不要和实例变量重名。例如，以下的代码是错误的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方法名称和实例变量均为birth:</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.birth</span><br></pre></td></tr></table></figure>

<p>这是因为调用<code>s.birth</code>时，首先转换为方法调用，在执行<code>return self.birth</code>时，又视为访问<code>self</code>的属性，于是又转换为方法调用，造成无限递归，最终导致栈溢出报错<code>RecursionError</code>。</p>
<p>小结</p>
<p><code>@property</code>广泛应用在类的定义中，可以让调用者写出简短的代码，同时保证对参数进行必要的检查，这样，程序运行时就减少了出错的可能性。</p>
<h2 id="隐藏和封装"><a href="#隐藏和封装" class="headerlink" title="隐藏和封装"></a>隐藏和封装</h2><p>封装、继承、多态</p>
<p>在Class内部，可以有属性和方法，而外部代码可以通过直接调用实例变量的方法来操作数据，这样，就隐藏了内部的复杂逻辑。</p>
<p>但是，从前面Student类的定义来看，外部代码还是可以自由地修改一个实例的<code>name</code>、<code>score</code>属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student(<span class="string">&#x27;Bart Simpson&#x27;</span>, <span class="number">59</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.score</span><br><span class="line"><span class="number">59</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.score = <span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.score</span><br><span class="line"><span class="number">99</span></span><br></pre></td></tr></table></figure>

<p>如果要让内部属性不被外部访问，可以把属性的名称前加上两个下划线<code>__</code>，在Python中，实例的变量名如果以<code>__</code>开头，就变成了一个私有变量（private），只有内部可以访问，外部不能访问，所以，我们把Student类改一改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, score</span>):</span></span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__score = score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_score</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.__name, self.__score))</span><br></pre></td></tr></table></figure>

<p>改完后，对于外部代码来说，没什么变动，但是已经无法从外部访问<code>实例变量.__name</code>和<code>实例变量.__score</code>了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student(<span class="string">&#x27;Bart Simpson&#x27;</span>, <span class="number">59</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.__name</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;Student&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;__name&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这样就确保了外部代码不能随意修改对象内部的状态，这样通过访问限制的保护，代码更加健壮。</p>
<p>但是如果外部代码要获取name和score怎么办？可以给Student类增加<code>get_name</code>和<code>get_score</code>这样的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_score</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__score</span><br></pre></td></tr></table></figure>

<p>如果又要允许外部代码修改score怎么办？可以再给Student类增加<code>set_score</code>方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_score</span>(<span class="params">self, score</span>):</span></span><br><span class="line">        self.__score = score</span><br></pre></td></tr></table></figure>

<p>你也许会问，原先那种直接通过<code>bart.score = 99</code>也可以修改啊，为什么要定义一个方法大费周折？因为在方法中，可以对参数做检查，避免传入无效的参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_score</span>(<span class="params">self, score</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= score &lt;= <span class="number">100</span>:</span><br><span class="line">            self.__score = score</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;bad score&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>需要注意的是，在Python中，变量名类似<code>__xxx__</code>的，也就是以双下划线开头，并且以双下划线结尾的，是特殊变量，特殊变量是可以直接访问的，不是private变量，所以，不能用<code>__name__</code>、<code>__score__</code>这样的变量名。</p>
<p>有些时候，你会看到以一个下划线开头的实例变量名，比如<code>_name</code>，这样的实例变量外部是可以访问的，但是，按照约定俗成的规定，当你看到这样的变量时，意思就是，“虽然我可以被访问，但是，请把我视为私有变量，不要随意访问”。</p>
<p>双下划线开头的实例变量是不是一定不能从外部访问呢？其实也不是。不能直接访问<code>__name</code>是因为Python解释器对外把<code>__name</code>变量改成了<code>_Student__name</code>，所以，仍然可以通过<code>_Student__name</code>来访问<code>__name</code>变量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart._Student__name</span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br></pre></td></tr></table></figure>

<p>但是强烈建议你不要这么干，因为不同版本的Python解释器可能会把<code>__name</code>改成不同的变量名。</p>
<p>总的来说就是，Python本身没有任何机制阻止你干坏事，一切全靠自觉。</p>
<p>最后注意下面的这种<em>错误写法</em>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student(<span class="string">&#x27;Bart Simpson&#x27;</span>, <span class="number">59</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.get_name()</span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.__name = <span class="string">&#x27;New Name&#x27;</span> <span class="comment"># 设置__name变量！</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.__name</span><br><span class="line"><span class="string">&#x27;New Name&#x27;</span></span><br></pre></td></tr></table></figure>

<p>表面上看，外部代码“成功”地设置了<code>__name</code>变量，但实际上这个<code>__name</code>变量和class内部的<code>__name</code>变量<em>不是</em>一个变量！内部的<code>__name</code>变量已经被Python解释器自动改成了<code>_Student__name</code>，而外部代码给<code>bart</code>新增了一个<code>__name</code>变量。不信试试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.get_name() <span class="comment"># get_name()内部返回self.__name</span></span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><h3 id="继承的语法"><a href="#继承的语法" class="headerlink" title="继承的语法"></a>继承的语法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span>(<span class="params">SuperClass1, SuperClass2, ...</span>):</span></span><br><span class="line">    <span class="comment"># 类定义部分</span></span><br></pre></td></tr></table></figure>

<h3 id="关于多继承"><a href="#关于多继承" class="headerlink" title="关于多继承"></a>关于多继承</h3><p>如果多个父类中包含了同名的方法，排在前面的父类中的方法会“遮蔽”排在后面的父类中的同名方法</p>
<h3 id="重写父类的方法"><a href="#重写父类的方法" class="headerlink" title="重写父类的方法"></a>重写父类的方法</h3><p>父类的方法不适用子类时，在子类重新定义将其覆盖即可</p>
<h3 id="使用未绑定方法调用被重写的方法"><a href="#使用未绑定方法调用被重写的方法" class="headerlink" title="使用未绑定方法调用被重写的方法"></a>使用未绑定方法调用被重写的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;父类中定义的foo方法&#x27;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span>(<span class="params">BaseClass</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;子类重写父类中的foo方法&#x27;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;执行bar方法&#x27;</span>)</span><br><span class="line">        self.foo()</span><br><span class="line">        BaseClass.foo(self)</span><br><span class="line">sc = SubClass()</span><br><span class="line">sc.bar()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">执行bar方法</span><br><span class="line">子类重写父类中的foo方法</span><br><span class="line">父类中定义的foo方法</span><br></pre></td></tr></table></figure>

<h3 id="使用super函数调用父类的构造方法"><a href="#使用super函数调用父类的构造方法" class="headerlink" title="使用super函数调用父类的构造方法"></a>使用super函数调用父类的构造方法</h3><p>python的子类也会继承父类的构造方法，如果子类有多个直接父类，那么排在前面的父类构造方法会被优先使用</p>
<p>为了让子类能同时初始化两个父类中的实例变量，子类需要定义自己的构造方法，即重写父类的构造方法。且如果子类重写了父类的构造方法，则子类的构造方法必须调用父类的构造方法。</p>
<p><strong>super()</strong> 函数是用于调用父类(超类)的一个方法。</p>
<p><strong>super()</strong> 是用来解决多重继承问题的，直接用类名调用父类方法在使用单继承的时候没问题，但是如果使用多继承，会涉及到查找顺序（MRO）、重复调用（钻石继承）等种种问题。</p>
<p>MRO 就是类的方法解析顺序表, 其实也就是继承父类方法时的顺序表。</p>
<p>以下是 super() 方法的语法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>(<span class="built_in">type</span>[, <span class="built_in">object</span>-<span class="keyword">or</span>-<span class="built_in">type</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>type – 类。</li>
<li>object-or-type – 类，一般是 self</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self, x</span>):</span></span><br><span class="line">         y = x+<span class="number">1</span></span><br><span class="line">         <span class="built_in">print</span>(y)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().add(x)</span><br><span class="line">b = B()</span><br><span class="line">b.add(<span class="number">2</span>)  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooParent</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.parent = <span class="string">&#x27;I\&#x27;m the parent.&#x27;</span></span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;Parent&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self,message</span>):</span></span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;%s from Parent&quot;</span> % message)</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooChild</span>(<span class="params">FooParent</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># super(FooChild,self) 首先找到 FooChild 的父类（就是类 FooParent），然后把类 FooChild 的对象转换为类 FooParent 的对象</span></span><br><span class="line">        <span class="built_in">super</span>(FooChild,self).__init__()    </span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;Child&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self,message</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(FooChild, self).bar(message)</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;Child bar fuction&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span> (self.parent)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    fooChild = FooChild()</span><br><span class="line">    fooChild.bar(<span class="string">&#x27;HelloWorld&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">执行结果：</span><br><span class="line"></span><br><span class="line">Parent</span><br><span class="line">Child</span><br><span class="line">HelloWorld <span class="keyword">from</span> Parent</span><br><span class="line">Child bar fuction</span><br><span class="line">I<span class="string">&#x27;m the parent.</span></span><br></pre></td></tr></table></figure>

<h2 id="python的动态性"><a href="#python的动态性" class="headerlink" title="python的动态性"></a>python的动态性</h2><h3 id="动态属性与-slots"><a href="#动态属性与-slots" class="headerlink" title="动态属性与__slots__"></a>动态属性与<code>__slots__</code></h3><p>希望为所有实例都添加方法，则可以通过为类添加方法来实现</p>
<p><code>__slots__</code>属性可以限制性的为某个类动态添加属性和方法</p>
<p><code>__slots__</code>属性值是一个元组，该元组的所有元素列出了该类的实例允许动态添加的所有属性名和方法名</p>
<p><code>__slots__</code>属性并不限制通过类来动态添加属性或方法</p>
<p><code>__slots__</code>属性指定的限制只对当前类的实例有效，该类派生出来的子类不起作用</p>
<h3 id="使用type-函数定义类"><a href="#使用type-函数定义类" class="headerlink" title="使用type()函数定义类"></a>使用type()函数定义类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;fn函数&#x27;</span>)</span><br><span class="line"><span class="comment"># 使用type()定义dog类</span></span><br><span class="line">Dog = <span class="built_in">type</span>(<span class="string">&#x27;Dog&#x27;</span>, (<span class="built_in">object</span>,), <span class="built_in">dict</span>(walk=fn, age=<span class="number">6</span>))</span><br><span class="line"><span class="comment"># 创建Dog对象</span></span><br><span class="line">d = Dog()</span><br></pre></td></tr></table></figure>

<ul>
<li>参数一：创建的类名</li>
<li>参数二：该类继承的父类集合，元组形式</li>
<li>参数三：该字典对象为该类绑定的类变量和方法</li>
</ul>
<h3 id="使用metaclass"><a href="#使用metaclass" class="headerlink" title="使用metaclass"></a>使用metaclass</h3><p>没有 metaclass 的情况下，子类继承父类，父类是无法对子类执行操作的，但有了 metaclass，就可以对子类进行操作，就像装饰器那样可以动态定制和修改被装饰的类，metaclass 可以动态的定制或修改继承它的子类。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yssjun/p/9832526.html">https://www.cnblogs.com/yssjun/p/9832526.html</a></p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Animal is running...&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Dog is running...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Cat is running...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_twice</span>(<span class="params">animal</span>):</span></span><br><span class="line">    animal.run()</span><br><span class="line">    animal.run()</span><br><span class="line">   </span><br><span class="line"><span class="comment"># 当我们传入Animal的实例时，run_twice()就打印出：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>run_twice(Animal())</span><br><span class="line">Animal <span class="keyword">is</span> running...</span><br><span class="line">Animal <span class="keyword">is</span> running...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当我们传入Dog的实例时，run_twice()就打印出：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>run_twice(Dog())</span><br><span class="line">Dog <span class="keyword">is</span> running...</span><br><span class="line">Dog <span class="keyword">is</span> running...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当我们传入Cat的实例时，run_twice()就打印出：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>run_twice(Cat())</span><br><span class="line">Cat <span class="keyword">is</span> running...</span><br><span class="line">Cat <span class="keyword">is</span> running...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再定义一个Tortoise类型，也从Animal派生：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tortoise</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Tortoise is running slowly...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>run_twice(Tortoise())</span><br><span class="line">Tortoise <span class="keyword">is</span> running slowly...</span><br><span class="line">Tortoise <span class="keyword">is</span> running slowly...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>你会发现，新增一个<code>Animal</code>的子类，不必对<code>run_twice()</code>做任何修改，实际上，任何依赖<code>Animal</code>作为参数的函数或者方法都可以不加修改地正常运行，原因就在于多态。</p>
<p>多态的好处就是，当我们需要传入<code>Dog</code>、<code>Cat</code>、<code>Tortoise</code>……时，我们只需要接收<code>Animal</code>类型就可以了，因为<code>Dog</code>、<code>Cat</code>、<code>Tortoise</code>……都是<code>Animal</code>类型，然后，按照<code>Animal</code>类型进行操作即可。由于<code>Animal</code>类型有<code>run()</code>方法，因此，传入的任意类型，只要是<code>Animal</code>类或者子类，就会自动调用实际类型的<code>run()</code>方法，这就是多态的意思：</p>
<p>对于一个变量，我们只需要知道它是<code>Animal</code>类型，无需确切地知道它的子类型，就可以放心地调用<code>run()</code>方法，而具体调用的<code>run()</code>方法是作用在<code>Animal</code>、<code>Dog</code>、<code>Cat</code>还是<code>Tortoise</code>对象上，由运行时该对象的确切类型决定，这就是多态真正的威力：调用方只管调用，不管细节，而当我们新增一种<code>Animal</code>的子类时，只要确保<code>run()</code>方法编写正确，不用管原来的代码是如何调用的。这就是著名的“开闭”原则：</p>
<p>对扩展开放：允许新增<code>Animal</code>子类；</p>
<p>对修改封闭：不需要修改依赖<code>Animal</code>类型的<code>run_twice()</code>等函数。</p>
<h3 id="检查类型"><a href="#检查类型" class="headerlink" title="检查类型"></a>检查类型</h3><ul>
<li>issubclass(cls, class_or_tuple)：检查cls是否为后一个类或元组包含的多个类中任意类的子类</li>
<li>isinstance(obj, class_or_tuple)：检查obj是否为后一个类或元组包含的多个类中任意类的对象</li>
</ul>
<p>issubclass第一个参数是类名，isinstance第一个参数是变量</p>
<p>第二个参数皆可以使用元组</p>
<ul>
<li><code>__bases__</code>属性：使用该属性可以查看该类的所有直接父类</li>
<li><code>__subclasses__()</code>方法：使用该方法可以查看该类的所有直接子类</li>
</ul>
<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><p>实例有限且固定的类称为枚举类</p>
<h3 id="枚举入门"><a href="#枚举入门" class="headerlink" title="枚举入门"></a>枚举入门</h3><ul>
<li>直接使用Enum列出多个枚举值来创建枚举类</li>
<li>通过继承Enum基类来派生枚举类</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/2305.html">http://c.biancheng.net/view/2305.html</a></p>
<p>一些具有特殊含义的类，其实例化对象的个数往往是固定的，比如用一个类表示月份，则该类的实例对象最多有 12 个；再比如用一个类表示季节，则该类的实例化对象最多有 4 个。</p>
<p>针对这种特殊的类，<a target="_blank" rel="noopener" href="http://c.biancheng.net/python/">Python</a> 3.4 中新增加了 Enum 枚举类。也就是说，对于这些实例化对象个数固定的类，可以用枚举类来定义。</p>
<p>例如，下面程序演示了如何定义一个枚举类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span>    </span><br><span class="line">    <span class="comment"># 为序列值指定value值    </span></span><br><span class="line">    red = <span class="number">1</span>    </span><br><span class="line">    green = <span class="number">2</span>    </span><br><span class="line">    blue = <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>如果想将一个类定义为枚举类，只需要令其继承自 enum 模块中的 Enum 类即可。例如在上面程序中，Color 类继承自 Enum 类，则证明这是一个枚举类。</p>
<p>在 Color 枚举类中，red、green、blue 都是该类的成员（可以理解为是类变量）。注意，枚举类的每个成员都由 2 部分组成，分别为 name 和 value，其中 name 属性值为该枚举值的变量名（如 red），value 代表该枚举值的序号（序号通常从 1 开始）。</p>
<p>和普通类的用法不同，枚举类不能用来实例化对象，但这并不妨碍我们访问枚举类中的成员。访问枚举类成员的方式有多种，例如以 Color 枚举类为例，在其基础上添加如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#调用枚举成员的 3 种方式</span></span><br><span class="line"><span class="built_in">print</span>(Color.red)</span><br><span class="line"><span class="built_in">print</span>(Color[<span class="string">&#x27;red&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(Color(<span class="number">1</span>))</span><br><span class="line"><span class="comment">#调取枚举成员中的 value 和 name</span></span><br><span class="line"><span class="built_in">print</span>(Color.red.value)</span><br><span class="line"><span class="built_in">print</span>(Color.red.name)</span><br><span class="line"><span class="comment">#遍历枚举类中所有成员的 2 种方式</span></span><br><span class="line"><span class="keyword">for</span> color <span class="keyword">in</span> Color:    </span><br><span class="line">    <span class="built_in">print</span>(color)</span><br></pre></td></tr></table></figure>

<p>程序输出结果为：</p>
<p>Color.red<br>Color.red<br>Color.red<br>1<br>red<br>Color.red<br>Color.green<br>Color.blue</p>
<p>枚举类成员之间不能比较大小，但可以用 == 或者 is 进行比较是否相等，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(Color.red == Color.green)</span><br><span class="line"><span class="built_in">print</span>(Color.red.name <span class="keyword">is</span> Color.green.name)</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<p>Flase<br>Flase</p>
<p>需要注意的是，枚举类中各个成员的值，不能在类的外部做任何修改，也就是说，下面语法的做法是错误的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Color.red = <span class="number">4</span></span><br></pre></td></tr></table></figure>


<p>除此之外，该枚举类还提供了一个 <strong>members</strong> 属性，该属性是一个包含枚举类中所有成员的字典，通过遍历该属性，也可以访问枚举类中的各个成员。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name,member <span class="keyword">in</span> Color.__members__.items():    </span><br><span class="line">    <span class="built_in">print</span>(name,<span class="string">&quot;-&gt;&quot;</span>,member)</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<p>red -&gt; Color.red<br>green -&gt; Color.green<br>blue -&gt; Color.blue</p>
<p>值得一提的是，Python 枚举类中各个成员必须保证 name 互不相同，但 value 可以相同，举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enumclass Color(Enum):    </span><br><span class="line">    <span class="comment"># 为序列值指定value值    </span></span><br><span class="line">    red = <span class="number">1</span>    </span><br><span class="line">    green = <span class="number">1</span>    </span><br><span class="line">    blue = <span class="number">3</span></span><br><span class="line">    <span class="built_in">print</span>(Color[<span class="string">&#x27;green&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<p>Color.red</p>
<p>可以看到，Color 枚举类中 red 和 green 具有相同的值（都是 1），Python 允许这种情况的发生，它会将 green 当做是 red 的别名，因此当访问 green 成员时，最终输出的是 red。</p>
<p>在实际编程过程中，如果想避免发生这种情况，可以借助 @unique 装饰器，这样当枚举类中出现相同值的成员时，程序会报 ValueError 错误。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#引入 unique</span></span><br><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum,unique</span><br><span class="line"><span class="comment">#添加 unique 装饰器</span></span><br><span class="line"><span class="meta">@unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span>    </span><br><span class="line">    <span class="comment"># 为序列值指定value值    </span></span><br><span class="line">    red = <span class="number">1</span>    </span><br><span class="line">    green = <span class="number">1</span>    </span><br><span class="line">    blue = <span class="number">3</span></span><br><span class="line">    <span class="built_in">print</span>(Color[<span class="string">&#x27;green&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>运行程序会报错：</p>
<p>Traceback (most recent call last):<br> File “D:\python3.6\demo.py”, line 3, in <module><br>  class Color(Enum):<br> File “D:\python3.6\lib\enum.py”, line 834, in unique<br>  (enumeration, alias_details))<br>ValueError: duplicate values found in &lt;enum ‘Color’&gt;: green -&gt; red</module></p>
<p>除了通过继承 Enum 类的方法创建枚举类，还可以使用 Enum() 函数创建枚举类。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"><span class="comment">#创建一个枚举类</span></span><br><span class="line">Color = Enum(<span class="string">&quot;Color&quot;</span>,(<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;green&#x27;</span>,<span class="string">&#x27;blue&#x27;</span>))</span><br><span class="line"><span class="comment">#调用枚举成员的 3 种方式</span></span><br><span class="line"><span class="built_in">print</span>(Color.red)</span><br><span class="line"><span class="built_in">print</span>(Color[<span class="string">&#x27;red&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(Color(<span class="number">1</span>))</span><br><span class="line"><span class="comment">#调取枚举成员中的 value 和 name</span></span><br><span class="line"><span class="built_in">print</span>(Color.red.value)</span><br><span class="line"><span class="built_in">print</span>(Color.red.name)</span><br><span class="line"><span class="comment">#遍历枚举类中所有成员的 2 种方式</span></span><br><span class="line"><span class="keyword">for</span> color <span class="keyword">in</span> Color:    </span><br><span class="line">    <span class="built_in">print</span>(color)</span><br></pre></td></tr></table></figure>

<p>Enum() 函数可接受 2 个参数，第一个用于指定枚举类的类名，第二个参数用于指定枚举类中的多个成员。</p>
<p>如上所示，仅通过一行代码，即创建了一个和前面的 Color 类相同的枚举类。运行程序，其输出结果为：</p>
<p>Color.red<br>Color.red<br>Color.red<br>1<br>red<br>Color.red<br>Color.green<br>Color.blue</p>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="异常概述"><a href="#异常概述" class="headerlink" title="异常概述"></a>异常概述</h2><p>……</p>
<h2 id="异常处理机制"><a href="#异常处理机制" class="headerlink" title="异常处理机制"></a>异常处理机制</h2><h3 id="使用try…except捕获异常"><a href="#使用try…except捕获异常" class="headerlink" title="使用try…except捕获异常"></a>使用try…except捕获异常</h3><p>……</p>
<h3 id="异常类的继承体系"><a href="#异常类的继承体系" class="headerlink" title="异常类的继承体系"></a>异常类的继承体系</h3><p>异常捕获时所有的父类异常的except块都应该排在子类异常的except后面</p>
<p>即：先处理小异常，再处理大异常</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liujiacai/p/10280323.html">https://www.cnblogs.com/liujiacai/p/10280323.html</a></p>
<p>总结： BaseException 是所有异常类的基类，如果不清楚是那种异常，需要捕获所有异常，则直接使用 BaseException 捕获。其他所有异常仅仅是对基础异常的细化和分类</p>
<h3 id="多异常捕获"><a href="#多异常捕获" class="headerlink" title="多异常捕获"></a>多异常捕获</h3><p>构建多个异常类的元组</p>
<h3 id="访问异常信息"><a href="#访问异常信息" class="headerlink" title="访问异常信息"></a>访问异常信息</h3><ul>
<li>args：返回异常的错误编号和描述字符串</li>
<li>errno：返回异常的错误编号</li>
<li>strerror：返回异常的描述字符串</li>
<li>with_traceback()：处理异常的传播轨迹信息</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        file = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e.args)</span><br><span class="line">        <span class="built_in">print</span>(e.errno)</span><br><span class="line">        <span class="built_in">print</span>(e.strerror)</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<h3 id="else模块"><a href="#else模块" class="headerlink" title="else模块"></a>else模块</h3><p>当try块没有出现异常时，程序会执行else块</p>
<p>如果希望某段代码的异常能被后面的except块捕获，将这段代码放在try块中。否则，放else中</p>
<h3 id="使用finally回收资源"><a href="#使用finally回收资源" class="headerlink" title="使用finally回收资源"></a>使用finally回收资源</h3><p>有时，程序在try中打开了一些物理资源（例如数据库连接、网络连接、磁盘文件等）</p>
<p>finally总会执行</p>
<p>try块必须，except和finally必须存在一个</p>
<p>除非try块、except块中调用了退出python解释器的方法，否则finally始终执行</p>
<p>只有当finally块执行完之后，系统才会再次跳回来执行try块、except块里的raise或return语句，如果finally块里也使用了raise或return，程序将不再执行try或except</p>
<h3 id="异常处理嵌套"><a href="#异常处理嵌套" class="headerlink" title="异常处理嵌套"></a>异常处理嵌套</h3><p>……</p>
<h2 id="记录异常"><a href="#记录异常" class="headerlink" title="记录异常"></a>记录异常</h2><p>如果不捕获错误，自然可以让Python解释器来打印出错误堆栈，但程序也被结束了。既然我们能捕获错误，就可以把错误堆栈打印出来，然后分析错误原因，同时，让程序继续执行下去。</p>
<p>Python内置的<code>logging</code>模块可以非常容易地记录错误信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># err_logging.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / <span class="built_in">int</span>(s)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> foo(s) * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        bar(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        logging.exception(e)</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;END&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>同样是出错，但程序打印完错误信息后会继续执行，并正常退出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ python3 err_logging.py</span><br><span class="line">ERROR:root:division by zero</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;err_logging.py&quot;</span>, line <span class="number">13</span>, <span class="keyword">in</span> main</span><br><span class="line">    bar(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  File <span class="string">&quot;err_logging.py&quot;</span>, line <span class="number">9</span>, <span class="keyword">in</span> bar</span><br><span class="line">    <span class="keyword">return</span> foo(s) * <span class="number">2</span></span><br><span class="line">  File <span class="string">&quot;err_logging.py&quot;</span>, line <span class="number">6</span>, <span class="keyword">in</span> foo</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / <span class="built_in">int</span>(s)</span><br><span class="line">ZeroDivisionError: division by zero</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>通过配置，<code>logging</code>还可以把错误记录到日志文件里，方便事后排查。</p>
<h2 id="使用raise引发异常"><a href="#使用raise引发异常" class="headerlink" title="使用raise引发异常"></a>使用raise引发异常</h2><h3 id="引发异常"><a href="#引发异常" class="headerlink" title="引发异常"></a>引发异常</h3><p>……</p>
<h3 id="自定义异常类"><a href="#自定义异常类" class="headerlink" title="自定义异常类"></a>自定义异常类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuctionException</span>(<span class="params">Exception</span>):</span><span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="except和raise同时使用"><a href="#except和raise同时使用" class="headerlink" title="except和raise同时使用"></a>except和raise同时使用</h3><ul>
<li>应用后台需要通过日志来记录异常发生的详细情况</li>
<li>应用还需要根据异常向应用使用者传达某种提示</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuctionException</span>(<span class="params">Exception</span>):</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuctionTest</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, init_price</span>):</span></span><br><span class="line">        self.init_price = init_price</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bid</span>(<span class="params">self, bid_price</span>):</span></span><br><span class="line">        d = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            d = <span class="built_in">float</span>(bid_price)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># 此处只是简单地打印异常信息</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;转换出异常：&quot;</span>, e)</span><br><span class="line">            <span class="comment"># 再次引发自定义异常</span></span><br><span class="line"><span class="comment">#            raise AuctionException(&quot;竞拍价必须是数值，不能包含其他字符！&quot;)  # ①</span></span><br><span class="line"><span class="comment">#             raise AuctionException(e)</span></span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line">        <span class="keyword">if</span> self.init_price &gt; d:</span><br><span class="line">            <span class="keyword">raise</span> AuctionException(<span class="string">&quot;竞拍价比起拍价低，不允许竞拍！&quot;</span>)</span><br><span class="line">        initPrice = d</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    at = AuctionTest(<span class="number">20.4</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        at.bid(<span class="string">&quot;df&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> AuctionException <span class="keyword">as</span> ae:</span><br><span class="line">        <span class="comment"># 再次捕获到bid()方法中的异常，并对该异常进行处理</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;main函数捕捉的异常：&#x27;</span>, ae)</span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<h2 id="python的异常传播轨迹"><a href="#python的异常传播轨迹" class="headerlink" title="python的异常传播轨迹"></a>python的异常传播轨迹</h2><p>python专门提供了traceback模块来处理异常传播轨迹</p>
<ul>
<li>traceback.print_exc()：将异常传播轨迹信息输出到控制台或指定文件</li>
<li>format_exc()：将异常传播轨迹信息转换成字符串</li>
</ul>
<h1 id="模块和包"><a href="#模块和包" class="headerlink" title="模块和包"></a>模块和包</h1><h2 id="模块化编程"><a href="#模块化编程" class="headerlink" title="模块化编程"></a>模块化编程</h2><h3 id="导入模块的语法"><a href="#导入模块的语法" class="headerlink" title="导入模块的语法"></a>导入模块的语法</h3><p>……</p>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><p>……</p>
<h3 id="为模块编写说明文档"><a href="#为模块编写说明文档" class="headerlink" title="为模块编写说明文档"></a>为模块编写说明文档</h3><p>……</p>
<h3 id="为模块编写测试代码"><a href="#为模块编写测试代码" class="headerlink" title="为模块编写测试代码"></a>为模块编写测试代码</h3><p>……</p>
<h2 id="加载模块"><a href="#加载模块" class="headerlink" title="加载模块"></a>加载模块</h2><ul>
<li>使用环境变量</li>
<li>将模块放在默认的模块加载路径下</li>
</ul>
<h3 id="使用环境变量"><a href="#使用环境变量" class="headerlink" title="使用环境变量"></a>使用环境变量</h3><p>……</p>
<h3 id="默认的模块加载路径"><a href="#默认的模块加载路径" class="headerlink" title="默认的模块加载路径"></a>默认的模块加载路径</h3><p>……</p>
<h3 id="导入模块的本质"><a href="#导入模块的本质" class="headerlink" title="导入模块的本质"></a>导入模块的本质</h3><p>输出语句会在import时自动执行</p>
<p>import导入的本质：将模块中的所有代码加载到内存并执行，然后将整个模块内容赋值给与模块同名的变量，该变量的类型是module，而在该模块定义的所有程序单元都相当于该module对象的成员</p>
<p>from import导入本质：模块中全部代码加载到内存并执行，然后只导入指定变量、函数等成员单元，不会将整个模块导入</p>
<h3 id="模块的-all-变量"><a href="#模块的-all-变量" class="headerlink" title="模块的__all__变量"></a>模块的<code>__all__</code>变量</h3><p>在默认情况下from import*会导入该模块中所有不以下划线开头的程序单元</p>
<p><code>__all__</code>变量，将变量的值设置成一个列表，只有该列表中的程序单元才会被暴露出来</p>
<p>如果希望使用<code>__all__</code>列表之外的程序单元</p>
<ol>
<li>import pprint    pprint.pprint</li>
<li>from pprint import pprint</li>
<li>pprint不在pprint模块的all列表中</li>
</ol>
<h2 id="使用包"><a href="#使用包" class="headerlink" title="使用包"></a>使用包</h2><h3 id="定义包"><a href="#定义包" class="headerlink" title="定义包"></a>定义包</h3><p>文件夹中存在<code>__init.py__</code>文件</p>
<h3 id="导入包内成员"><a href="#导入包内成员" class="headerlink" title="导入包内成员"></a>导入包内成员</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> print_shape</span><br><span class="line"><span class="keyword">from</span> .print_shape <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>

<h2 id="查看模块内容"><a href="#查看模块内容" class="headerlink" title="查看模块内容"></a>查看模块内容</h2><h3 id="模块包含什么"><a href="#模块包含什么" class="headerlink" title="模块包含什么"></a>模块包含什么</h3><ol>
<li>dir()</li>
<li><code>__all__</code></li>
</ol>
<h3 id="查看文档"><a href="#查看文档" class="headerlink" title="查看文档"></a>查看文档</h3><ol>
<li>help()    help函数查看的就是<code>__doc__</code>属性值</li>
<li><code>__doc__</code></li>
</ol>
<h3 id="查看模块的源文件路径"><a href="#查看模块的源文件路径" class="headerlink" title="查看模块的源文件路径"></a>查看模块的源文件路径</h3><p><code>__file__</code>属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.__file__</span><br></pre></td></tr></table></figure>

<h1 id="常见模块"><a href="#常见模块" class="headerlink" title="常见模块"></a>常见模块</h1><h2 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h2><p>sys模块是与<strong>python解释器</strong>交互的⼀个接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[e <span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">dir</span>(sys) <span class="keyword">if</span> <span class="keyword">not</span> e.startswith(<span class="string">&#x27;_&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;addaudithook&#x27;</span>, <span class="string">&#x27;api_version&#x27;</span>, <span class="string">&#x27;argv&#x27;</span>, <span class="string">&#x27;audit&#x27;</span>, <span class="string">&#x27;base_exec_prefix&#x27;</span>, <span class="string">&#x27;base_prefix&#x27;</span>, <span class="string">&#x27;breakpointhook&#x27;</span>, <span class="string">&#x27;builtin_module_names&#x27;</span>, <span class="string">&#x27;byteorder&#x27;</span>, <span class="string">&#x27;call_tracing&#x27;</span>, <span class="string">&#x27;callstats&#x27;</span>, <span class="string">&#x27;copyright&#x27;</span>, <span class="string">&#x27;displayhook&#x27;</span>, <span class="string">&#x27;dllhandle&#x27;</span>, <span class="string">&#x27;dont_write_bytecode&#x27;</span>, <span class="string">&#x27;exc_info&#x27;</span>, <span class="string">&#x27;excepthook&#x27;</span>, <span class="string">&#x27;exec_prefix&#x27;</span>, <span class="string">&#x27;executable&#x27;</span>, <span class="string">&#x27;exit&#x27;</span>, <span class="string">&#x27;flags&#x27;</span>, <span class="string">&#x27;float_info&#x27;</span>, <span class="string">&#x27;float_repr_style&#x27;</span>, <span class="string">&#x27;get_asyncgen_hooks&#x27;</span>, <span class="string">&#x27;get_coroutine_origin_tracking_depth&#x27;</span>, <span class="string">&#x27;getallocatedblocks&#x27;</span>, <span class="string">&#x27;getcheckinterval&#x27;</span>, <span class="string">&#x27;getdefaultencoding&#x27;</span>, <span class="string">&#x27;getfilesystemencodeerrors&#x27;</span>, <span class="string">&#x27;getfilesystemencoding&#x27;</span>, <span class="string">&#x27;getprofile&#x27;</span>, <span class="string">&#x27;getrecursionlimit&#x27;</span>, <span class="string">&#x27;getrefcount&#x27;</span>, <span class="string">&#x27;getsizeof&#x27;</span>, <span class="string">&#x27;getswitchinterval&#x27;</span>, <span class="string">&#x27;gettrace&#x27;</span>, <span class="string">&#x27;getwindowsversion&#x27;</span>, <span class="string">&#x27;hash_info&#x27;</span>, <span class="string">&#x27;hexversion&#x27;</span>, <span class="string">&#x27;implementation&#x27;</span>, <span class="string">&#x27;int_info&#x27;</span>, <span class="string">&#x27;intern&#x27;</span>, <span class="string">&#x27;is_finalizing&#x27;</span>, <span class="string">&#x27;last_traceback&#x27;</span>, <span class="string">&#x27;last_type&#x27;</span>, <span class="string">&#x27;last_value&#x27;</span>, <span class="string">&#x27;maxsize&#x27;</span>, <span class="string">&#x27;maxunicode&#x27;</span>, <span class="string">&#x27;meta_path&#x27;</span>, <span class="string">&#x27;modules&#x27;</span>, <span class="string">&#x27;path&#x27;</span>, <span class="string">&#x27;path_hooks&#x27;</span>, <span class="string">&#x27;path_importer_cache&#x27;</span>, <span class="string">&#x27;platform&#x27;</span>, <span class="string">&#x27;prefix&#x27;</span>, <span class="string">&#x27;pycache_prefix&#x27;</span>, <span class="string">&#x27;set_asyncgen_hooks&#x27;</span>, <span class="string">&#x27;set_coroutine_origin_tracking_depth&#x27;</span>, <span class="string">&#x27;setcheckinterval&#x27;</span>, <span class="string">&#x27;setprofile&#x27;</span>, <span class="string">&#x27;setrecursionlimit&#x27;</span>, <span class="string">&#x27;setswitchinterval&#x27;</span>, <span class="string">&#x27;settrace&#x27;</span>, <span class="string">&#x27;stderr&#x27;</span>, <span class="string">&#x27;stdin&#x27;</span>, <span class="string">&#x27;stdout&#x27;</span>, <span class="string">&#x27;thread_info&#x27;</span>, <span class="string">&#x27;unraisablehook&#x27;</span>, <span class="string">&#x27;version&#x27;</span>, <span class="string">&#x27;version_info&#x27;</span>, <span class="string">&#x27;warnoptions&#x27;</span>, <span class="string">&#x27;winver&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>sys.argv：获取运行python程序的命令行参数 sys.argv[0]指该python程序 sys.argv[1]代表为python程序提供的第一个参数</li>
<li>sys.byteorder：显示本地字节序的指示符，大端模式返回big，否则返回little</li>
<li>sys.copyright：返回和python解释器有关的版权信息</li>
<li>sys.executable：返回python解释器在磁盘上的存储路径</li>
<li>sys.exit()：通过引发SystemExit异常来退出程序。将其放在try中不能阻止finally块的执行，正常退出时exit(0),错误退出sys.exit(1)<ul>
<li>os._exit(n)：可以放在try中，阻止finally块执行</li>
</ul>
</li>
<li>sys.flags：该只读属性返回运行python命令时指定的旗标</li>
<li>sys.getfilesystemencoding()：返回在当前系统中保存文件所用的字符集</li>
<li>sys.getrefcount(object)：返回指定对象的引用次数。当object对象的引用次数为0时，系统会回收该对象</li>
<li>sys.getrecursionlimit()：返回python解释器当前支持的递归深度，可以通过setrecursionlimit()方法重新配置</li>
<li>sys.getswitchinterval()：返回在当前python解释器中线程切换的时间间隔，可以通过setswitchinterval()方法重新配置</li>
<li>sys.implementation：返回当前python解释器的实现</li>
<li>sys.maxsize：返回python整数支持的最大值</li>
<li>sys.modules：返回模块名和载入模块对应关系的字典</li>
<li>sys.path：该属性指定python查找模块的路径列表，可以通过修改动态增加 <code>sys.append</code></li>
<li>sys.platform：返回python解释器所在系统的标识符</li>
<li>sys.stdin：返回系统的标准输入流——一个类文件对象</li>
<li>sys.stdout：返回系统的标准输出流——一个类文件对象</li>
<li>sys.version：返回当前python解释器的版本信息</li>
<li>sys.winver：返回当前python解释器的主版本号</li>
</ul>
<p>若某参数中有空格，应当用“ ”引出</p>
<h2 id="os模块"><a href="#os模块" class="headerlink" title="os模块"></a>os模块</h2><p>os模块是与<strong>操作系统</strong>交互的⼀个接⼝ </p>
<p>当前执行这个python⽂件的⼯作⽬录相关的⼯作路径</p>
<table>
<thead>
<tr>
<th align="left">os.getcwd()</th>
<th align="left">获取当前工作目录，即当前python脚本工作的目录路径</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.chdir(“dirname”)</td>
<td align="left">改变当前脚本工作目录；相当于shell下cd</td>
</tr>
<tr>
<td align="left">os.curdir</td>
<td align="left">返回当前目录: (‘.’)</td>
</tr>
<tr>
<td align="left">os.pardir</td>
<td align="left">获取当前目录的父目录字符串名：(‘..’)</td>
</tr>
</tbody></table>
<p>文件夹相关</p>
<table>
<thead>
<tr>
<th align="left">os.makedirs(‘dirname1/dirname2’)</th>
<th align="left">可生成多层递归目录</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.removedirs(‘dirname1’)</td>
<td align="left">若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</td>
</tr>
<tr>
<td align="left">os.mkdir(‘dirname’)</td>
<td align="left">生成单级目录；相当于shell中mkdir dirname</td>
</tr>
<tr>
<td align="left">os.rmdir(‘dirname’)</td>
<td align="left">删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</td>
</tr>
<tr>
<td align="left">os.listdir(‘dirname’)</td>
<td align="left">列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</td>
</tr>
</tbody></table>
<p>文件相关</p>
<table>
<thead>
<tr>
<th align="left">os.remove()</th>
<th align="left">删除一个文件</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.rename(“oldname”,”newname”)</td>
<td align="left">重命名文件/目录</td>
</tr>
<tr>
<td align="left">os.stat(‘path/filename’)</td>
<td align="left">获取文件/目录信息</td>
</tr>
</tbody></table>
<p>操作系统差异相关</p>
<table>
<thead>
<tr>
<th align="left">os.sep</th>
<th align="left">输出操作系统特定的路径分隔符，win下为”&quot;,Linux下为”/“</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.linesep</td>
<td align="left">输出当前平台使用的行终止符，win下为”\t\n”,Linux下为”\n”</td>
</tr>
<tr>
<td align="left">os.pathsep</td>
<td align="left">输出用于分割文件路径的字符串 win下为;,Linux下为:</td>
</tr>
<tr>
<td align="left">os.name</td>
<td align="left">输出字符串指示当前使用平台。win-&gt;’nt’; Linux-&gt;’posix’</td>
</tr>
</tbody></table>
<p>执行系统命令相关</p>
<table>
<thead>
<tr>
<th align="left">os.system(“bash command”)</th>
<th align="left">运行shell命令，直接显示</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.popen(“bash command“).read()</td>
<td align="left">运行shell命令，获取执行结果</td>
</tr>
<tr>
<td align="left">os.environ</td>
<td align="left">获取系统环境变量</td>
</tr>
</tbody></table>
<p>进程管理相关</p>
<table>
<thead>
<tr>
<th>os.abort()</th>
<th>生成一个SIGABRT信号给当前进程</th>
</tr>
</thead>
<tbody><tr>
<td>os.excel(path, arg0, arg1…)</td>
<td>使用参数来执行path代表的执行文件</td>
</tr>
<tr>
<td>os.forkpty()</td>
<td>fork一个子进程</td>
</tr>
<tr>
<td>os.kill(pid, sig)</td>
<td>将sig信号发送到pid对应的进程，用于结束该进程</td>
</tr>
<tr>
<td>os.killpg(pgid, sig)</td>
<td>将sig信号发送到pgid对应的进程组</td>
</tr>
<tr>
<td>os.popen(cmd, mode=’r’, buffering=-1)</td>
<td>用于向cmd命令打开读写管道</td>
</tr>
<tr>
<td>os.spawnl(mode, path, …)</td>
<td>用于在新进程中执行新程序</td>
</tr>
<tr>
<td>os.startfile(path[, operation])</td>
<td>对指定文件使用该文件关联的工具执行operation对应的操作</td>
</tr>
<tr>
<td>os.system(command)</td>
<td>运行操作系统上的指令命令，且新程序所在进程会替代原有进程，包括os.excel</td>
</tr>
</tbody></table>
<p>path系列，和路径相关</p>
<table>
<thead>
<tr>
<th align="left">os.path.abspath(path)</th>
<th align="left">返回path规范化的绝对路径</th>
</tr>
</thead>
<tbody><tr>
<td align="left">os.path.split(path)</td>
<td align="left">将path分割成目录和文件名二元组返回</td>
</tr>
<tr>
<td align="left">os.path.dirname(path)</td>
<td align="left">返回path的目录。其实就是os.path.split(path)的第一个元素</td>
</tr>
<tr>
<td align="left">os.path.basename(path)</td>
<td align="left">返回path最后的文件名。如何path以／或\结尾，那么就会返回空值，即os.path.split(path)的第二个元素。</td>
</tr>
<tr>
<td align="left">os.path.exists(path)</td>
<td align="left">如果path存在，返回True；如果path不存在，返回False</td>
</tr>
<tr>
<td align="left">os.path.isabs(path)</td>
<td align="left">如果path是绝对路径，返回True</td>
</tr>
<tr>
<td align="left">os.path.isfile(path)</td>
<td align="left">如果path是一个存在的文件，返回True。否则返回False</td>
</tr>
<tr>
<td align="left">os.path.isdir(path)</td>
<td align="left">如果path是一个存在的目录，则返回True。否则返回False</td>
</tr>
<tr>
<td align="left">os.path.join(path1[, path2[, …]])</td>
<td align="left">将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</td>
</tr>
<tr>
<td align="left">os.path.getatime(path)</td>
<td align="left">返回path所指向的文件或者目录的最后访问时间</td>
</tr>
<tr>
<td align="left">os.path.getmtime(path)</td>
<td align="left">返回path所指向的文件或者目录的最后修改时间</td>
</tr>
<tr>
<td align="left">os.path.getsize(path)</td>
<td align="left">返回path的大小</td>
</tr>
</tbody></table>
<ul>
<li>os.fsencode(filename)：该函数对类路径(path-like)的文件名进行编码</li>
<li>os.fsdecode(filename)：该函数对类路径(path-like)的文件名进行解码</li>
<li>os.PathLike：这是一个类，代表一个类路径(path-like)对象</li>
<li>os.getenv(key, default=None)：获取指定环境变量的值</li>
<li>os.getlogin()：返回当前系统的登录用户名</li>
<li>os.getpid()：获取当前进程id</li>
<li>os.getppid()：获取当前进程的父进程id</li>
<li>os.putenv(key, value)：用于设置环境变量</li>
<li>os.cpu_count()：返回当前系统的CPU数量</li>
<li>os.urandom(size)：返回合适作为加密使用的、最多由N个字节组成的bytes对象</li>
</ul>
<h2 id="random"><a href="#random" class="headerlink" title="random"></a>random</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.__all__</span><br><span class="line">[<span class="string">&#x27;Random&#x27;</span>, <span class="string">&#x27;seed&#x27;</span>, <span class="string">&#x27;random&#x27;</span>, <span class="string">&#x27;uniform&#x27;</span>, <span class="string">&#x27;randint&#x27;</span>, <span class="string">&#x27;choice&#x27;</span>, <span class="string">&#x27;sample&#x27;</span>, <span class="string">&#x27;randrange&#x27;</span>, <span class="string">&#x27;shuffle&#x27;</span>, <span class="string">&#x27;normalvariate&#x27;</span>, <span class="string">&#x27;lognormvariate&#x27;</span>, <span class="string">&#x27;expovariate&#x27;</span>, <span class="string">&#x27;vonmisesvariate&#x27;</span>, <span class="string">&#x27;gammavariate&#x27;</span>, <span class="string">&#x27;triangular&#x27;</span>, <span class="string">&#x27;gauss&#x27;</span>, <span class="string">&#x27;betavariate&#x27;</span>, <span class="string">&#x27;paretovariate&#x27;</span>, <span class="string">&#x27;weibullvariate&#x27;</span>, <span class="string">&#x27;getstate&#x27;</span>, <span class="string">&#x27;setstate&#x27;</span>, <span class="string">&#x27;getrandbits&#x27;</span>, <span class="string">&#x27;choices&#x27;</span>, <span class="string">&#x27;SystemRandom&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>random.seed(a=None, version=2)：指定种子来初始化伪随机数生成器</li>
<li>random.randrange(start, stop[, step])：返回start到stop，步长为step的随机数，不生成区间对象，step&gt;stop则返回1，step=2为偶数，倍数</li>
<li>random.randint(a, b)：生成a&lt;=N&lt;=b的随机数，等同于random.randrange(a, b+1)的效果</li>
<li>random.choice(seq)：从seq中随机抽取一个元素，若seq为空，则引发IndexError异常</li>
<li>random.choices(seq, weights=None, *, cum_weights=None, k=1)：从seq序列中抽取k个元素，还可通过weights指定各元素的抽取权重</li>
<li>random.shuffle(x[, random])：对x序列重新随机排列</li>
<li>random.sample(population, k)：从population中随机抽取k个独立的元素</li>
<li>random.random()；生成一个从0.0(包含)到1.0(不包含)之间的伪随机浮点数</li>
<li>random.uniform(a, b)：生成a&lt;=N&lt;=b的随机数</li>
<li>random.expovariate(lambd)：生成呈指数分布的随机数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">random.choices([<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;swift&#x27;</span>, <span class="string">&#x27;kotlin&#x27;</span>], <span class="string">&#x27;5, 5, 1&#x27;</span>, k=<span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[s <span class="keyword">for</span> s <span class="keyword">in</span> <span class="built_in">dir</span>(time) <span class="keyword">if</span> <span class="keyword">not</span> s.startswith(<span class="string">&#x27;_&#x27;</span>)]</span><br><span class="line">[<span class="string">&#x27;altzone&#x27;</span>, <span class="string">&#x27;asctime&#x27;</span>, <span class="string">&#x27;ctime&#x27;</span>, <span class="string">&#x27;daylight&#x27;</span>, <span class="string">&#x27;get_clock_info&#x27;</span>, <span class="string">&#x27;gmtime&#x27;</span>, <span class="string">&#x27;localtime&#x27;</span>, <span class="string">&#x27;mktime&#x27;</span>, <span class="string">&#x27;monotonic&#x27;</span>, <span class="string">&#x27;monotonic_ns&#x27;</span>, <span class="string">&#x27;perf_counter&#x27;</span>, <span class="string">&#x27;perf_counter_ns&#x27;</span>, <span class="string">&#x27;process_time&#x27;</span>, <span class="string">&#x27;process_time_ns&#x27;</span>, <span class="string">&#x27;sleep&#x27;</span>, <span class="string">&#x27;strftime&#x27;</span>, <span class="string">&#x27;strptime&#x27;</span>, <span class="string">&#x27;struct_time&#x27;</span>, <span class="string">&#x27;thread_time&#x27;</span>, <span class="string">&#x27;thread_time_ns&#x27;</span>, <span class="string">&#x27;time&#x27;</span>, <span class="string">&#x27;time_ns&#x27;</span>, <span class="string">&#x27;timezone&#x27;</span>, <span class="string">&#x27;tzname&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ol>
<li>结构化时间(struct_time) ：struct_time结构化时间共有9个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天等）</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(time.struct_time)</span><br><span class="line">[<span class="string">&#x27;__add__&#x27;</span>, <span class="string">&#x27;__class__&#x27;</span>, <span class="string">&#x27;__contains__&#x27;</span>, <span class="string">&#x27;__delattr__&#x27;</span>, <span class="string">&#x27;__dir__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__eq__&#x27;</span>, <span class="string">&#x27;__format__&#x27;</span>, <span class="string">&#x27;__ge__&#x27;</span>, <span class="string">&#x27;__getattribute__&#x27;</span>, <span class="string">&#x27;__getitem__&#x27;</span>, <span class="string">&#x27;__getnewargs__&#x27;</span>, <span class="string">&#x27;__gt__&#x27;</span>, <span class="string">&#x27;__hash__&#x27;</span>, <span class="string">&#x27;__init__&#x27;</span>, <span class="string">&#x27;__init_subclass__&#x27;</span>, <span class="string">&#x27;__iter__&#x27;</span>, <span class="string">&#x27;__le__&#x27;</span>, <span class="string">&#x27;__len__&#x27;</span>, <span class="string">&#x27;__lt__&#x27;</span>, <span class="string">&#x27;__mul__&#x27;</span>, <span class="string">&#x27;__ne__&#x27;</span>, <span class="string">&#x27;__new__&#x27;</span>, <span class="string">&#x27;__reduce__&#x27;</span>, <span class="string">&#x27;__reduce_ex__&#x27;</span>, <span class="string">&#x27;__repr__&#x27;</span>, <span class="string">&#x27;__rmul__&#x27;</span>, <span class="string">&#x27;__setattr__&#x27;</span>, <span class="string">&#x27;__sizeof__&#x27;</span>, <span class="string">&#x27;__str__&#x27;</span>, <span class="string">&#x27;__subclasshook__&#x27;</span>, <span class="string">&#x27;count&#x27;</span>, <span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;n_fields&#x27;</span>, <span class="string">&#x27;n_sequence_fields&#x27;</span>, <span class="string">&#x27;n_unnamed_fields&#x27;</span>, <span class="string">&#x27;tm_gmtoff&#x27;</span>, <span class="string">&#x27;tm_hour&#x27;</span>, <span class="string">&#x27;tm_isdst&#x27;</span>, <span class="string">&#x27;tm_mday&#x27;</span>, <span class="string">&#x27;tm_min&#x27;</span>, <span class="string">&#x27;tm_mon&#x27;</span>, <span class="string">&#x27;tm_sec&#x27;</span>, <span class="string">&#x27;tm_wday&#x27;</span>, <span class="string">&#x27;tm_yday&#x27;</span>, <span class="string">&#x27;tm_year&#x27;</span>, <span class="string">&#x27;tm_zone&#x27;</span>]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">索引（Index）</th>
<th align="left">属性（Attribute）</th>
<th align="left">值（Values）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">tm_year（年）</td>
<td align="left">比如2011</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">tm_mon（月）</td>
<td align="left">1月12日</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">tm_mday（日）</td>
<td align="left">1月31日</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">tm_hour（时）</td>
<td align="left">0 - 23</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">tm_min（分）</td>
<td align="left">0 - 59</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">tm_sec（秒）</td>
<td align="left">0 - 60</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">tm_wday（weekday）</td>
<td align="left">0 - 6（0表示周一）</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">tm_yday（一年中的第几天）</td>
<td align="left">1 - 366</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left">tm_isdst（是否是夏令时）</td>
<td align="left">默认为0</td>
</tr>
</tbody></table>
<ul>
<li>time.struct_time(tm_year=2018,…)<ul>
<li>time.struct_time(2018, 5, 2, 8, 0, 30, 3, 1, 0) 时间元组</li>
</ul>
</li>
<li>time.asctime([t])：将时间元组或struct_time转换为时间字符串，默认为当前时间</li>
<li>time.ctime([secs])：将以秒数为代表的时间转换为时间字符串</li>
<li>time.gtime([secs])：将以秒数为代表的时间转换为struct_time对象</li>
<li>time.localtime([secs])：将以秒数为代表的时间转换为当前struct_time对象</li>
<li>time.mktime(t)：localtime的反转函数</li>
<li>time.perf_counter()：返回性能计数器的值，秒为单位</li>
<li>time.process_time()：返回当前进程使用CPU的时间</li>
<li>time.sleep(secs)：暂停secs秒</li>
<li>time.strftime(format[, t])：将时间元组或struct_time对象格式化为指定格式的字符串</li>
<li>time.strptime(format[, t])：将字符串格式的时间解析成struct_time对象</li>
<li>time.time()：返回1970,1,1,0至今秒数</li>
<li>time.timezone：返回地区时间的偏移，秒为单位</li>
<li>time.tzname：返回本地时区名字</li>
</ul>
<p>格式模板</p>
<table>
<thead>
<tr>
<th align="left">%y</th>
<th align="left">两位数的年份表示（00-99）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">%Y</td>
<td align="left">四位数的年份表示（000-9999）</td>
</tr>
<tr>
<td align="left">%m</td>
<td align="left">月份（01-12）</td>
</tr>
<tr>
<td align="left">%d</td>
<td align="left">月内中的一天（0-31）</td>
</tr>
<tr>
<td align="left">%H</td>
<td align="left">24小时制小时数（0-23）</td>
</tr>
<tr>
<td align="left">%I</td>
<td align="left">12小时制小时数（01-12）</td>
</tr>
<tr>
<td align="left">%M</td>
<td align="left">分钟数（00=59）</td>
</tr>
<tr>
<td align="left">%S</td>
<td align="left">秒（00-59）</td>
</tr>
<tr>
<td align="left">%a</td>
<td align="left">本地简化星期名称</td>
</tr>
<tr>
<td align="left">%A</td>
<td align="left">本地完整星期名称</td>
</tr>
<tr>
<td align="left">%b</td>
<td align="left">本地简化的月份名称</td>
</tr>
<tr>
<td align="left">%B</td>
<td align="left">本地完整的月份名称</td>
</tr>
<tr>
<td align="left">%c</td>
<td align="left">本地相应的日期表示和时间表示</td>
</tr>
<tr>
<td align="left">%j</td>
<td align="left">年内的一天（001-366）</td>
</tr>
<tr>
<td align="left">%p</td>
<td align="left">本地A.M.或P.M.的等价符</td>
</tr>
<tr>
<td align="left">%U</td>
<td align="left">一年中的星期数（00-53）星期天为星期的开始</td>
</tr>
<tr>
<td align="left">%w</td>
<td align="left">星期（0-6），星期天为星期的开始</td>
</tr>
<tr>
<td align="left">%W</td>
<td align="left">一年中的星期数（00-53）星期一为星期的开始</td>
</tr>
<tr>
<td align="left">%x</td>
<td align="left">本地相应的日期表示</td>
</tr>
<tr>
<td align="left">%X</td>
<td align="left">本地相应的时间表示</td>
</tr>
<tr>
<td align="left">%Z</td>
<td align="left">当前时区的名称</td>
</tr>
<tr>
<td align="left">%%</td>
<td align="left">%号本身</td>
</tr>
</tbody></table>
<p>时间戳是计算机能够识别的时间；时间字符串是人能够看懂的时间；元组则是用来操作时间的 <strong>几种格式之间的转换</strong></p>
<p><img src="/2021/08/01/python%E7%BC%96%E7%A8%8B/%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2.jpg" alt="时间格式转换"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化时间 ----&gt;  结构化时间</span></span><br><span class="line">ft = time.strftime(<span class="string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>)  <span class="comment"># &#x27;2021/08/05 23:45:15&#x27;</span></span><br><span class="line">st = time.strptime(ft,<span class="string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(st)</span><br><span class="line"><span class="comment"># time.struct_time(tm_year=2021, tm_mon=8, tm_mday=5, tm_hour=23, tm_min=45, tm_sec=15, tm_wday=3, tm_yday=217, tm_isdst=-1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结构化时间 ---&gt; 时间戳</span></span><br><span class="line">t = time.mktime(st)</span><br><span class="line"><span class="built_in">print</span>(t)   <span class="comment"># 1628178315.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间戳 ----&gt; 结构化时间</span></span><br><span class="line">t = time.time()</span><br><span class="line">st = time.localtime(t)</span><br><span class="line"><span class="built_in">print</span>(st)</span><br><span class="line"><span class="comment"># 结构化时间 ---&gt; 格式化时间</span></span><br><span class="line">ft = time.strftime(<span class="string">&#x27;%Y/%m/%d %H:%M:%S&#x27;</span>,st)</span><br><span class="line"><span class="built_in">print</span>(ft)</span><br></pre></td></tr></table></figure>

<p><img src="/2021/08/01/python%E7%BC%96%E7%A8%8B/%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A22.jpg" alt="时间格式转换2"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#结构化时间 --&gt; %a %b %d %H:%M:%S %Y串</span></span><br><span class="line"><span class="comment">#time.asctime(结构化时间) 如果不传参数，直接返回当前时间的格式化串</span></span><br><span class="line"><span class="built_in">print</span>(time.asctime(time.localtime(<span class="number">1550312090.4021888</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#时间戳 --&gt; %a %d %d %H:%M:%S %Y串</span></span><br><span class="line"><span class="comment">#time.ctime(时间戳)  如果不传参数，直接返回当前时间的格式化串</span></span><br><span class="line"><span class="built_in">print</span>(time.ctime(<span class="number">1550312090.4021888</span>))</span><br></pre></td></tr></table></figure>

<h2 id="JSON支持"><a href="#JSON支持" class="headerlink" title="JSON支持"></a>JSON支持</h2><h3 id="JSON的基本知识"><a href="#JSON的基本知识" class="headerlink" title="JSON的基本知识"></a>JSON的基本知识</h3><p>JSON主要有两种数据结构：</p>
<ul>
<li>key-value对组成的数据结构，python中对应dict对象</li>
<li>有序集合，python中对应列表</li>
</ul>
<h4 id="使用JSON语法创建对象"><a href="#使用JSON语法创建对象" class="headerlink" title="使用JSON语法创建对象"></a>使用JSON语法创建对象</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">object</span> = </span><br><span class="line">&#123;</span><br><span class="line">    propertyName1 : propertyValue1,</span><br><span class="line">    propertyName2 : &#123;</span><br><span class="line">    	propertyName1 : propertyValue1,</span><br><span class="line">    	propertyName2 : propertyValue2,</span><br><span class="line">    	propertyName3 : propertyValue3,</span><br><span class="line">    	propertyName4 : propertyValue4</span><br><span class="line">	&#125;,</span><br><span class="line">    propertyName3 : info(),</span><br><span class="line">    propertyName4 : propertyValue4</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用JSON语法创建数组"><a href="#使用JSON语法创建数组" class="headerlink" title="使用JSON语法创建数组"></a>使用JSON语法创建数组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a = [<span class="string">&#x27;yeeku&#x27;</span>, <span class="string">&#x27;nono&#x27;</span>];</span><br></pre></td></tr></table></figure>

<h3 id="python的JSON支持"><a href="#python的JSON支持" class="headerlink" title="python的JSON支持"></a>python的JSON支持</h3><p>python对象到json字符串的转换规则：</p>
<table>
<thead>
<tr>
<th>Python</th>
<th>JSON</th>
</tr>
</thead>
<tbody><tr>
<td>dict</td>
<td>object</td>
</tr>
<tr>
<td>list, tuple</td>
<td>array</td>
</tr>
<tr>
<td>str, unicode</td>
<td>string</td>
</tr>
<tr>
<td>int, long, float</td>
<td>number</td>
</tr>
<tr>
<td>True</td>
<td>true</td>
</tr>
<tr>
<td>False</td>
<td>false</td>
</tr>
<tr>
<td>None</td>
<td>null</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">json.dump(obj, fp, *, skipkeys=<span class="literal">False</span>, ensure_ascii=<span class="literal">True</span>, check_circular=<span class="literal">True</span>, allow_nan=<span class="literal">True</span>, cls=<span class="literal">None</span>, indent=<span class="literal">None</span>, separators=<span class="literal">None</span>, default=<span class="literal">None</span>, sort_keys=<span class="literal">False</span>, **kw)</span><br><span class="line"><span class="comment"># 将obj对象转换成JSON字符串输出到fp流中，fp是一个支持write()方法的类对象文件</span></span><br><span class="line">json.dumps(obj, *, skipkeys=<span class="literal">False</span>, ensure_ascii=<span class="literal">True</span>, check_circular=<span class="literal">True</span>, allow_nan=<span class="literal">True</span>, cls=<span class="literal">None</span>, indent=<span class="literal">None</span>, separators=<span class="literal">None</span>, encoding=”utf-<span class="number">8</span>”, default=<span class="literal">None</span>, sort_keys=<span class="literal">False</span>, **kw)</span><br><span class="line"><span class="comment"># 将obj对象转换为JSON字符串，并返回该JSON字符串</span></span><br></pre></td></tr></table></figure>

<p>json字符串到python对象的转换规则：</p>
<table>
<thead>
<tr>
<th>JSON</th>
<th>Python</th>
</tr>
</thead>
<tbody><tr>
<td>object</td>
<td>dict</td>
</tr>
<tr>
<td>array</td>
<td>list</td>
</tr>
<tr>
<td>string</td>
<td>unicode</td>
</tr>
<tr>
<td>number (int)</td>
<td>int, long</td>
</tr>
<tr>
<td>number (real)</td>
<td>float</td>
</tr>
<tr>
<td>true True</td>
<td></td>
</tr>
<tr>
<td>false</td>
<td>False</td>
</tr>
<tr>
<td>null</td>
<td>None</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">json.load()</span><br><span class="line"><span class="comment"># 从fp流读取JSON字符串，将其恢复成JSON对象</span></span><br><span class="line">json.loads()</span><br><span class="line"><span class="comment"># 将JSON字符串s恢复成JSON对象</span></span><br></pre></td></tr></table></figure>

<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="python的正则表达式"><a href="#python的正则表达式" class="headerlink" title="python的正则表达式"></a>python的正则表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.__all__</span><br><span class="line">[<span class="string">&#x27;match&#x27;</span>, <span class="string">&#x27;fullmatch&#x27;</span>, <span class="string">&#x27;search&#x27;</span>, <span class="string">&#x27;sub&#x27;</span>, <span class="string">&#x27;subn&#x27;</span>, <span class="string">&#x27;split&#x27;</span>, <span class="string">&#x27;findall&#x27;</span>, <span class="string">&#x27;finditer&#x27;</span>, <span class="string">&#x27;compile&#x27;</span>, <span class="string">&#x27;purge&#x27;</span>, <span class="string">&#x27;template&#x27;</span>, <span class="string">&#x27;escape&#x27;</span>, <span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;Pattern&#x27;</span>, <span class="string">&#x27;Match&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;ASCII&#x27;</span>, <span class="string">&#x27;IGNORECASE&#x27;</span>, <span class="string">&#x27;LOCALE&#x27;</span>, <span class="string">&#x27;MULTILINE&#x27;</span>, <span class="string">&#x27;DOTALL&#x27;</span>, <span class="string">&#x27;VERBOSE&#x27;</span>, <span class="string">&#x27;UNICODE&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>re.compile(pattern, flags=0)：该函数用于将正则表达式字符串编译成_sre.SRE_Pattern对象</li>
<li>re.match(pattern, string, flags=0)：尝试从字符串的开始位置来匹配正则表达式</li>
<li>re.search(pattern, string, flags=0)：扫描整个字符串，并返回字符串中第一处匹配pattern的匹配对象</li>
<li>re.findall(pattern, string, flags=0)：扫描整个字符串，并返回字符串中所有匹配pattern的子串组成的列表</li>
<li>re.finditer(pattern, string, flags=0)：扫描整个字符串，并返回字符串中所有匹配pattern的子串组成的迭代器</li>
<li>re.fullmatch(pattern, string, flags=0)：该函数要求整个字符串能匹配pattern</li>
<li>re.sub(pattern, repl, string, count=0, flags=0)：用于将string中匹配pattern的替换成repl，count为最多替换多少次，0为全部</li>
<li>re.split(pattern, string, maxsplit=0, flags=0)：使用pattern对string进行分割，该函数返回分割得到的多个子串组成的列表</li>
<li>re.purge()：清楚正则表达式缓存</li>
<li>re.escape(pattern)：对模式中除ASCII字符、数值、下划线之外的字符进行转义,添加\</li>
</ul>
<ol>
<li>将正则表达式编译成一个pattern对象</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.complie(<span class="string">&quot;正则表达式&quot;</span>)  </span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>pattern提供一系列的方法，来对文本进行匹配，一般返回一个match对象</p>
</li>
<li><p>通过使用match对象提供的方法来获取匹配结果</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">match.group() <span class="comment">#获取该匹配对象中指定组所匹配的字符串</span></span><br><span class="line">match.__getitem__(g) <span class="comment"># match.group(g)的简化写法 match[g]代替match.group(g)</span></span><br><span class="line">match.group(<span class="number">0</span>)<span class="comment">#获取匹配结果，结果同上</span></span><br><span class="line">match.groups() <span class="comment"># 所匹配的字符串组成的元组</span></span><br><span class="line">match.groupdict() <span class="comment"># 组成的字典</span></span><br><span class="line">match.span() <span class="comment">#获取匹配范围，开始到结束</span></span><br><span class="line">match.start() <span class="comment">#匹配开始位置</span></span><br><span class="line">match.end() <span class="comment">#匹配结束位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ?p&lt;名字&gt; 为正则表达式的组指定的名字</span></span><br><span class="line">match.pos：返回传给正则表达式的pos参数</span><br><span class="line">match.endpos：返回传给正则表达式的endpos参数</span><br><span class="line">match.lastindex：返回最后一个匹配的捕获组的整数索引</span><br><span class="line">match.lastgroup：返回最后一个匹配的捕获组的名字</span><br><span class="line">match.re：返回执行正则表达式匹配时所用的正则表达式</span><br><span class="line">match.string：返回执行正则表达式匹配时所用的字符串</span><br></pre></td></tr></table></figure>

<h3 id="正则表达式旗标"><a href="#正则表达式旗标" class="headerlink" title="正则表达式旗标"></a>正则表达式旗标</h3><ul>
<li>re.A：控制\w \W \b \B \d \D \s \S只匹配ASCII字符而不匹配所有的Unicode字符，可在正则表达式中使用?a行内旗标表示</li>
<li>re.DEBUG：显示编译正则表达式的Debug信息，无行内旗标</li>
<li>re.I或re.IGNORECASE：匹配时不区分大小写 ?i</li>
<li>re.S：点(.)可以匹配包括换行符在内所有字符</li>
<li>re.X：允许分行书写正则表达式</li>
</ul>
<h3 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h3><table>
<thead>
<tr>
<th align="left">元字符</th>
<th align="left">匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td align="left">\w</td>
<td align="left">匹配字母（包含中文）或数字或下划线</td>
</tr>
<tr>
<td align="left">\W</td>
<td align="left">匹配非字母（包含中文）或数字或下划线</td>
</tr>
<tr>
<td align="left">\s</td>
<td align="left">匹配任意的空白符</td>
</tr>
<tr>
<td align="left">\S</td>
<td align="left">匹配任意非空白符</td>
</tr>
<tr>
<td align="left">\d</td>
<td align="left">匹配数字</td>
</tr>
<tr>
<td align="left">\D</td>
<td align="left">匹配非数字</td>
</tr>
<tr>
<td align="left">\A</td>
<td align="left">从字符串开头匹配</td>
</tr>
<tr>
<td align="left">\z</td>
<td align="left">匹配字符串的结束，如果是换行，只匹配到换行前的结果</td>
</tr>
<tr>
<td align="left">\n</td>
<td align="left">匹配一个换行符</td>
</tr>
<tr>
<td align="left">\t</td>
<td align="left">匹配一个制表符</td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">匹配字符串的开始</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">匹配字符串的结尾</td>
</tr>
<tr>
<td align="left">.</td>
<td align="left">匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</td>
</tr>
<tr>
<td align="left">[…]</td>
<td align="left">匹配字符组中的字符</td>
</tr>
<tr>
<td align="left">[^…]</td>
<td align="left">匹配除了字符组中的字符的所有字符</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">匹配0个或者多个左边的字符。</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">匹配一个或者多个左边的字符。</td>
</tr>
<tr>
<td align="left">？</td>
<td align="left">匹配0个或者1个左边的字符，非贪婪方式。</td>
</tr>
<tr>
<td align="left">{n}</td>
<td align="left">精准匹配n个前面的表达式。</td>
</tr>
<tr>
<td align="left">{n,m}</td>
<td align="left">匹配n到m次由前面的正则表达式定义的片段，贪婪方式</td>
</tr>
<tr>
<td align="left">()</td>
<td align="left">匹配括号内的表达式，也表示一个组</td>
</tr>
</tbody></table>
<p>单字符匹配：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\w&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\W&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\s&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\S&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\d&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\D&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\A上大&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;^上大&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;666\z&#x27;,&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;))</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;666\Z&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;666$&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)666&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\n&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;\t&#x27;</span>,<span class="string">&#x27;上大人123asdfg%^&amp;*(_ \t \n)&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;上&#x27;</span>, <span class="string">&#x27;大&#x27;</span>, <span class="string">&#x27;人&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;_&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;%&#x27;</span>, <span class="string">&#x27;^&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;)&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;上&#x27;</span>, <span class="string">&#x27;大&#x27;</span>, <span class="string">&#x27;人&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;%&#x27;</span>, <span class="string">&#x27;^&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;)&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;上&#x27;</span>, <span class="string">&#x27;大&#x27;</span>, <span class="string">&#x27;人&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;%&#x27;</span>, <span class="string">&#x27;^&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\t&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;)&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;上大&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;上大&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;666&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;666&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;\n&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;\t&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>重复匹配：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;ab aab a*b a2b a牛b a\nb&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;ab aab a*b a2b a牛b a\nb&#x27;</span>,re.DOTALL))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a?b&#x27;</span>, <span class="string">&#x27;ab aab abb aaaab a牛b aba**b&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;ab aab aaab abbb&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;ab*&#x27;</span>, <span class="string">&#x27;ab aab aaab abbbbb&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a+b&#x27;</span>, <span class="string">&#x27;ab aab aaab abbb&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a&#123;2,4&#125;b&#x27;</span>, <span class="string">&#x27;ab aab aaab aaaaabb&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.*b&#x27;</span>, <span class="string">&#x27;ab aab a*()b&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.*?b&#x27;</span>, <span class="string">&#x27;ab a1b a*()b, aaaaaab&#x27;</span>))</span><br><span class="line"><span class="comment"># .*? 此时的?不是对左边的字符进行0次或者1次的匹配,</span></span><br><span class="line"><span class="comment"># 而只是针对.*这种贪婪匹配的模式进行一种限定:告知他要遵从非贪婪匹配 推荐使用!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># []: 括号中可以放任意一个字符,一个中括号代表一个字符</span></span><br><span class="line"><span class="comment"># - 在[]中表示范围,如果想要匹配上- 那么这个-符号不能放在中间.</span></span><br><span class="line"><span class="comment"># ^ 在[]中表示取反的意思.</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a.b&#x27;</span>, <span class="string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[abc]b&#x27;</span>, <span class="string">&#x27;aab abb acb adb afb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[0-9]b&#x27;</span>, <span class="string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[a-z]b&#x27;</span>, <span class="string">&#x27;a1b a3b aeb a*b arb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[a-zA-Z]b&#x27;</span>, <span class="string">&#x27;aAb aWb aeb a*b arb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[0-9][0-9]b&#x27;</span>, <span class="string">&#x27;a11b a12b a34b a*b arb a_b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[*-+]b&#x27;</span>,<span class="string">&#x27;a-b a*b a+b a/b a6b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[-*+]b&#x27;</span>,<span class="string">&#x27;a-b a*b a+b a/b a6b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a[^a-z]b&#x27;</span>, <span class="string">&#x27;acb adb a3b a*b&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组：() 制定一个规则,将满足规则的结果匹配出来</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;(.*?)_666&#x27;</span>, <span class="string">&#x27;cs_666 zhao_888 叶良辰_666&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;href=&quot;(.*?)&quot;&#x27;</span>,<span class="string">&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;点击&lt;/a&gt;&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;compan(y|ies)&#x27;</span>,<span class="string">&#x27;Too many companies have gone bankrupt, and the next one is my company&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;compan(?:y|ies)&#x27;</span>,<span class="string">&#x27;Too many companies have gone bankrupt, and the next one is my company&#x27;</span>))</span><br><span class="line"><span class="comment"># 分组() 中加入?: 表示将整体匹配出来而不只是()里面的内容</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;a2b&#x27;</span>, <span class="string">&#x27;a牛b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;a2b&#x27;</span>, <span class="string">&#x27;a牛b&#x27;</span>, <span class="string">&#x27;a\nb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;aaab&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;abbbbb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;aaab&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;aaab&#x27;</span>, <span class="string">&#x27;aaaab&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab aab a*()b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;a1b&#x27;</span>, <span class="string">&#x27;a*()b&#x27;</span>, <span class="string">&#x27;aaaaaab&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a1b&#x27;</span>, <span class="string">&#x27;a3b&#x27;</span>, <span class="string">&#x27;aeb&#x27;</span>, <span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;arb&#x27;</span>, <span class="string">&#x27;a_b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aab&#x27;</span>, <span class="string">&#x27;abb&#x27;</span>, <span class="string">&#x27;acb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a1b&#x27;</span>, <span class="string">&#x27;a3b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aeb&#x27;</span>, <span class="string">&#x27;arb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aAb&#x27;</span>, <span class="string">&#x27;aWb&#x27;</span>, <span class="string">&#x27;aeb&#x27;</span>, <span class="string">&#x27;arb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a11b&#x27;</span>, <span class="string">&#x27;a12b&#x27;</span>, <span class="string">&#x27;a34b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;a+b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a-b&#x27;</span>, <span class="string">&#x27;a*b&#x27;</span>, <span class="string">&#x27;a+b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a3b&#x27;</span>, <span class="string">&#x27;a*b&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;cs&#x27;</span>, <span class="string">&#x27; zhao_888 叶良辰&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;http://www.baidu.com&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;ies&#x27;</span>, <span class="string">&#x27;y&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;companies&#x27;</span>, <span class="string">&#x27;company&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>常用方法举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># findall 全部找到返回一个列表</span></span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;aghjmnbghagjmnbafgv&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># search 只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以通过调用group()方法得到匹配的字符串,如果字符串没有匹配，则返回None</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;sg|chensong&#x27;</span>, <span class="string">&#x27;chensong sg sg demon xwz&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;chensong&#x27;</span>, <span class="string">&#x27;chensong sg sg barry xwzz&#x27;</span>).group())</span><br><span class="line"></span><br><span class="line"><span class="comment"># match：None,同search,不过在字符串开始处进行匹配,完全可以用search+^代替match</span></span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;sg|chensong&#x27;</span>, <span class="string">&#x27;chensong sg sg demon xwz&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.match(<span class="string">&#x27;chensong&#x27;</span>, <span class="string">&#x27;chensong sg sg barry xwz&#x27;</span>).group())</span><br><span class="line"></span><br><span class="line"><span class="comment"># split 分割 可按照任意分割符进行分割</span></span><br><span class="line"><span class="built_in">print</span>(re.split(<span class="string">&#x27;[:：,;；，]&#x27;</span>,<span class="string">&#x27;1;3,c,a：3&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># sub 替换</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;帅哥&#x27;</span>,<span class="string">&#x27;sg&#x27;</span>,<span class="string">&#x27;陈松是一个帅哥&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># complie 根据包含的正则表达式的字符串创建模式对象。可以实现更有效率的匹配。</span></span><br><span class="line">obj = re.<span class="built_in">compile</span>(<span class="string">&#x27;\d&#123;2&#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.search(<span class="string">&#x27;abc123eeee&#x27;</span>).group())</span><br><span class="line"><span class="built_in">print</span>(obj.findall(<span class="string">&#x27;1231232aasd&#x27;</span>))</span><br><span class="line"></span><br><span class="line">ret = re.finditer(<span class="string">&#x27;\d&#x27;</span>,<span class="string">&#x27;asd123affess32432&#x27;</span>)      <span class="comment"># finditer返回一个存放匹配结果的迭代器</span></span><br><span class="line"><span class="built_in">print</span>(ret)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(ret).group())</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(ret).group())</span><br><span class="line"><span class="built_in">print</span>([i.group() <span class="keyword">for</span> i <span class="keyword">in</span> ret])</span><br></pre></td></tr></table></figure>

<ul>
<li>findall：有多少找多少</li>
<li>search：只找一个</li>
<li>match：只找一个，且在开头</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">8</span>), match=<span class="string">&#x27;chensong&#x27;</span>&gt;</span><br><span class="line">chensong</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">8</span>), match=<span class="string">&#x27;chensong&#x27;</span>&gt;</span><br><span class="line">chensong</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br><span class="line">陈松是一个sg</span><br><span class="line"><span class="number">12</span></span><br><span class="line">[<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;23&#x27;</span>]</span><br><span class="line">&lt;callable_iterator <span class="built_in">object</span> at <span class="number">0x000001B021814488</span>&gt;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">[<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>命名分组举例</p>
<p>命名分组匹配</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">&quot;&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;&quot;</span>,<span class="string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ret.group(<span class="string">&#x27;tag_name&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(ret.group())</span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">r&quot;&lt;(\w+)&gt;\w+&lt;/\1&gt;&quot;</span>,<span class="string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span>)</span><br><span class="line"><span class="comment"># 如果不给组起名字，也可以用\序号来找到对应的组，表示要找的内容和前面的组内容一致</span></span><br><span class="line"><span class="comment"># 获取的匹配结果可以直接用group(序号)拿到对应的值</span></span><br><span class="line"><span class="built_in">print</span>(ret.group(<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(ret.group())</span><br></pre></td></tr></table></figure>

<h2 id="容器相关类"><a href="#容器相关类" class="headerlink" title="容器相关类"></a>容器相关类</h2><h3 id="set和frozenset"><a href="#set和frozenset" class="headerlink" title="set和frozenset"></a>set和frozenset</h3><p>set:</p>
<ul>
<li>不记录元素的添加位置</li>
<li>元素不允许重复</li>
</ul>
<p>frozenset:</p>
<ul>
<li>是set的不可变版本</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>python编程</p><p><a href="https://violet-zky.github.io/2021/08/01/python编程/">https://violet-zky.github.io/2021/08/01/python编程/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="https://violet-zky.github.io/"><p>xkxk</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-08-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-01-27</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135456.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135550.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/08/02/Ubuntu%E6%AD%BB%E6%9C%BA%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E6%B1%87%E6%80%BB/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Ubuntu死机解决方法汇总</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/07/31/%E5%9F%BA%E4%BA%8E%E5%89%8D%E9%A6%88%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%AF%B9iris%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%86%E7%B1%BB/"><span class="level-item">基于前馈神经网络对iris数据集分类</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '1a1f16673d50d417c34590b1226545f4',
            repo: 'violet-zky.github.io',
            owner: 'violet-zky',
            clientID: '46a9f3481b46ea0129d8',
            clientSecret: '79c7c9cb847e141757d7864453bcbf89f0655b24',
            admin: ["violet-zky"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="小凯のHome"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">小凯のHome</p><p class="is-size-6 is-block">尚未执佩剑，转眼即江湖</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>江苏</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">28</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">35</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/violet-zky"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/u/7253852899"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="/2652516133@qq.com"><i class="fa fa-envelope"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-11T04:28:06.000Z">2022-02-11</time></p><p class="title"><a href="/2022/02/11/ModelArts%E5%AE%9E%E7%8E%B0%E6%99%BA%E8%83%BD%E8%8A%B1%E5%8D%89%E8%AF%86%E5%88%AB/">ModelArts实现智能花卉识别</a></p><p class="categories"><a href="/categories/%E5%8D%8E%E4%B8%BA%E4%BA%91/">华为云</a> / <a href="/categories/%E5%8D%8E%E4%B8%BA%E4%BA%91/%E5%BE%AE%E8%AE%A4%E8%AF%81-%E6%99%BA%E8%83%BD/">微认证 智能</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-10T08:49:18.000Z">2022-02-10</time></p><p class="title"><a href="/2022/02/10/kubernetes/">kubernetes</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-10T08:45:46.000Z">2022-02-10</time></p><p class="title"><a href="/2022/02/10/docker/">docker</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-06T06:46:27.000Z">2022-02-06</time></p><p class="title"><a href="/2022/02/06/Windows%E7%B3%BB%E7%BB%9F%E7%A6%81%E6%AD%A2%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/">Windows系统禁止自动更新</a></p><p class="categories"><a href="/categories/Windows/">Windows</a> / <a href="/categories/Windows/%E5%B0%8F%E6%8A%80%E5%B7%A7/">小技巧</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-28T01:12:45.000Z">2022-01-28</time></p><p class="title"><a href="/2022/01/28/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%A6%82%E5%BF%B5/">软件测试理论</a></p><p class="categories"><a href="/categories/%E6%B5%8B%E8%AF%95/">测试</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/DBA/"><span class="level-start"><span class="level-item">DBA</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/HCIA/"><span class="level-start"><span class="level-item">HCIA</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/HCIA/RS/"><span class="level-start"><span class="level-item">RS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/LaTeX/"><span class="level-start"><span class="level-item">LaTeX</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Nginx/"><span class="level-start"><span class="level-item">Nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Nginx/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Windows/"><span class="level-start"><span class="level-item">Windows</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Windows/%E5%B0%8F%E6%8A%80%E5%B7%A7/"><span class="level-start"><span class="level-item">小技巧</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/"><span class="level-start"><span class="level-item">云计算</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul class="mr-0"></ul></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/%E6%95%99%E7%A8%8B/"><span class="tag">教程</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">转载</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%80%E5%B7%A7/"><span class="tag">技巧</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/"><span class="tag">数据挖掘</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B5%8B%E8%AF%95/"><span class="tag">测试</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">深度学习</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/APP%E6%B5%8B%E8%AF%95/"><span class="tag">APP测试</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CNN/"><span class="tag">CNN</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECS/"><span class="tag">ECS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FTP/"><span class="tag">FTP</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LaTeX/"><span class="tag">LaTeX</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RS/"><span class="tag">RS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">1</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">小凯のHome</a><p class="size-small"><span>&copy; 2022 xkxk</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2021/1/6 6:6:6')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','violet-zky','violet-zky.github.io',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('46a9f3481b46ea0129d8','79c7c9cb847e141757d7864453bcbf89f0655b24','violet-zky','violet-zky.github.io',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>